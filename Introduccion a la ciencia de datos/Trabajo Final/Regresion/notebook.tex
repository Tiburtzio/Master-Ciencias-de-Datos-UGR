
% Default to the notebook output style

    


% Inherit from the specified cell style.




    
\documentclass[11pt]{article}

    
    
    \usepackage[T1]{fontenc}
    % Nicer default font (+ math font) than Computer Modern for most use cases
    \usepackage{mathpazo}

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % We will generate all images so they have a width \maxwidth. This means
    % that they will get their normal width if they fit onto the page, but
    % are scaled down if they would overflow the margins.
    \makeatletter
    \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
    \else\Gin@nat@width\fi}
    \makeatother
    \let\Oldincludegraphics\includegraphics
    % Set max figure width to be 80% of text width, for now hardcoded.
    \renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=.8\maxwidth]{#1}}
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionLabelFormat{nolabel}{}
    \captionsetup{labelformat=nolabel}

    \usepackage{adjustbox} % Used to constrain images to a maximum size 
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage[utf8x]{inputenc} % Allow utf-8 characters in the tex document
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range 
    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    

    
    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatability definitions
    \def\gt{>}
    \def\lt{<}
    % Document parameters
    \title{Trabajo Final Regresi?n}
    
    
    

    % Pygments definitions
    
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@fm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sa\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@dl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@mb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ch\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cpf\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % Exact colors from NB
    \definecolor{incolor}{rgb}{0.0, 0.0, 0.5}
    \definecolor{outcolor}{rgb}{0.545, 0.0, 0.0}



    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

    \begin{document}
    
    
    \maketitle
    
    

    
    \hypertarget{regresiuxf3n-sobre-el-dataset-treasury}{%
\subsection{Regresión sobre el dataset
treasury}\label{regresiuxf3n-sobre-el-dataset-treasury}}

Alberto Armijo Ruiz

    \hypertarget{informaciuxf3n-sobre-el-dataset}{%
\subsubsection{Información sobre el
dataset}\label{informaciuxf3n-sobre-el-dataset}}

El dataset \textbf{treasury} contiene información datos sobre la
economía de EEUU desde 01/04/1980 hasta 02/04/2000 tomados de forma
semanal. Este dataset contiene 1049 instancias cada una con quince
características cada una; las características son números reales. El
objetivo es predecir el valor de la variable \emph{1MonthCDRate}.

En el siguiente enlace se puede ver más información sobre las variables:
\url{http://funapp.cs.bilkent.edu.tr/DataSets/Data/TR.names}

Según la información que se ha podido obtener de dicha página, la
variable que queremos predecir, \emph{1MonthCDRate} está calculando la
tasa de interés que se le aplica a un \emph{Certificate of Deposit} (un
tipo de inversión) por un mes. Algunas de las características que
tenemos son el ratio de rendimiento del Tesoro de EEUU en 1, 3 ó 5 años,
ratios sobre bonos del Estado, el valor de la moneda de EEUU, el ratio
efectivo de fondos por el Estado, el número total de cuentas corrientes,
el número total de cuentas de ahorro, el total depositado por los bancos
en prestamos, el ratio del valor del dolar conforme a otras monedas como
el euro, la libra, etc\ldots{}

    \hypertarget{anuxe1lisis-de-datos}{%
\subsection{Análisis de datos}\label{anuxe1lisis-de-datos}}

El dataset que debemos de leer está contenido en la carpeta
\emph{treasury} que contiene archivos .dat, estos archivos contiene la
información del dataset \textbf{treasury}, tanto el dataset entero como
5 particiones utilizadas en validación cruzada.

Lo primero que haremos será leer el fichero y mirar que tipo de
información contiene.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}1}]:} \PY{c+c1}{\PYZsh{} Leemos el fichero del dataset. La forma de escribir el PATH puede variar dependiendo de la organización o del SO.}
        treasury \PY{o}{=} read.csv\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{treasury//treasury.dat\PYZsq{}}\PY{p}{,} comment.char \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{@\PYZsq{}}\PY{p}{,} header \PY{o}{=} \PY{k+kc}{FALSE}\PY{p}{,}
                           stringsAsFactors \PY{o}{=} \PY{k+kc}{FALSE}\PY{p}{)}
        
        \PY{c+c1}{\PYZsh{} Añadimos los nombres de las características y de la variable que vamos a predecir.}
        \PY{c+c1}{\PYZsh{} Se cambiará un poco los nombres de las variables para que no haya problemas con R.}
        y\PYZus{}var \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{MonthCDRate\PYZsq{}}
        pred\PYZus{}vars \PY{o}{=} \PY{k+kt}{c}\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{CMaturityRate\PYZus{}1Y\PYZsq{}}\PY{p}{,} \PY{l+s}{\PYZsq{}}\PY{l+s}{CMortgageRate\PYZus{}30Y\PYZsq{}}\PY{p}{,} \PY{l+s}{\PYZsq{}}\PY{l+s}{Rate\PYZus{}AuctionAverage\PYZus{}3M\PYZsq{}}\PY{p}{,} \PY{l+s}{\PYZsq{}}\PY{l+s}{Rate\PYZus{}SecondaryMarket\PYZus{}3M\PYZsq{}}\PY{p}{,}
                      \PY{l+s}{\PYZsq{}}\PY{l+s}{CMaturityRate\PYZus{}3Y\PYZsq{}}\PY{p}{,} \PY{l+s}{\PYZsq{}}\PY{l+s}{CMaturityRate\PYZus{}5Y\PYZsq{}}\PY{p}{,} \PY{l+s}{\PYZsq{}}\PY{l+s}{bankCredit\PYZsq{}}\PY{p}{,} \PY{l+s}{\PYZsq{}}\PY{l+s}{currency\PYZsq{}}\PY{p}{,} \PY{l+s}{\PYZsq{}}\PY{l+s}{demandDeposits\PYZsq{}}\PY{p}{,}
                      \PY{l+s}{\PYZsq{}}\PY{l+s}{federalFunds\PYZsq{}}\PY{p}{,} \PY{l+s}{\PYZsq{}}\PY{l+s}{moneyStock\PYZsq{}}\PY{p}{,} \PY{l+s}{\PYZsq{}}\PY{l+s}{checkableDeposits\PYZsq{}}\PY{p}{,} \PY{l+s}{\PYZsq{}}\PY{l+s}{loansLeases\PYZsq{}}\PY{p}{,} \PY{l+s}{\PYZsq{}}\PY{l+s}{savingsDeposits\PYZsq{}}\PY{p}{,} \PY{l+s}{\PYZsq{}}\PY{l+s}{tradeCurrencies\PYZsq{}}\PY{p}{)}
        \PY{k+kp}{colnames}\PY{p}{(}treasury\PY{p}{)} \PY{o}{=} \PY{k+kt}{c}\PY{p}{(}pred\PYZus{}vars\PY{p}{,}y\PYZus{}var\PY{p}{)}
        str\PY{p}{(}treasury\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
'data.frame':	1049 obs. of  16 variables:
 \$ CMaturityRate\_1Y       : num  92.1 86.4 97.5 102.6 128 {\ldots}
 \$ CMortgageRate\_30Y      : num  8.41 5.23 5.92 12 8.07 {\ldots}
 \$ Rate\_AuctionAverage\_3M : num  10.41 8.53 9.06 16.9 12.24 {\ldots}
 \$ Rate\_SecondaryMarket\_3M: num  7.71 4 5.58 10.4 7.14 {\ldots}
 \$ CMaturityRate\_3Y       : num  7.76 4.04 5.62 10.39 7.13 {\ldots}
 \$ CMaturityRate\_5Y       : num  8.8 6.3 6.53 13.06 9.28 {\ldots}
 \$ bankCredit             : num  8.79 6.76 6.74 13.03 9.84 {\ldots}
 \$ currency               : num  2665 3186 2132 1312 1839 {\ldots}
 \$ demandDeposits         : num  230 336 183 122 164 {\ldots}
 \$ federalFunds           : num  277 387 296 232 258 {\ldots}
 \$ moneyStock             : num  8.27 3.76 6.22 12.48 7.88 {\ldots}
 \$ checkableDeposits      : num  807 1144 729 436 598 {\ldots}
 \$ loansLeases            : num  570 800 540 310 427 {\ldots}
 \$ savingsDeposits        : num  2056 2225 1621 999 1412 {\ldots}
 \$ tradeCurrencies        : num  912 1222 953 344 787 {\ldots}
 \$ MonthCDRate            : num  8.3 4.02 5.99 11.55 7.8 {\ldots}

    \end{Verbatim}

    Por claridad me referiré a las variables del dataset por los nombres que
le he puesto en vez de los que vienen en el archivo .dat

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}2}]:} \PY{c+c1}{\PYZsh{} Utilizaremos la función summary para ver la media de las variables.}
        \PY{k+kp}{summary}\PY{p}{(}treasury\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}
 CMaturityRate_1Y CMortgageRate_30Y Rate_AuctionAverage_3M
 Min.   : 77.06   Min.   : 3.020    Min.   : 6.49         
 1st Qu.: 86.80   1st Qu.: 5.450    1st Qu.: 7.88         
 Median : 92.53   Median : 6.710    Median : 9.90         
 Mean   : 97.35   Mean   : 7.544    Mean   :10.40         
 3rd Qu.:104.74   3rd Qu.: 9.030    3rd Qu.:12.80         
 Max.   :142.65   Max.   :17.150    Max.   :18.63         
 Rate_SecondaryMarket_3M CMaturityRate_3Y CMaturityRate_5Y   bankCredit    
 Min.   : 2.670          Min.   : 2.690   Min.   : 4.090   Min.   : 4.170  
 1st Qu.: 4.990          1st Qu.: 4.980   1st Qu.: 5.890   1st Qu.: 6.140  
 Median : 5.810          Median : 5.770   Median : 7.440   Median : 7.760  
 Mean   : 6.851          Mean   : 6.829   Mean   : 8.117   Mean   : 8.359  
 3rd Qu.: 8.140          3rd Qu.: 8.090   3rd Qu.: 9.690   3rd Qu.: 9.980  
 Max.   :16.750          Max.   :16.760   Max.   :16.470   Max.   :16.130  
    currency    demandDeposits   federalFunds     moneyStock    
 Min.   :1131   Min.   :105.6   Min.   :225.8   Min.   : 2.860  
 1st Qu.:1746   1st Qu.:156.8   1st Qu.:258.2   1st Qu.: 5.300  
 Median :2616   Median :224.4   Median :287.7   Median : 6.640  
 Mean   :2640   Mean   :256.8   Mean   :308.1   Mean   : 7.549  
 3rd Qu.:3350   3rd Qu.:357.9   3rd Qu.:377.1   3rd Qu.: 8.980  
 Max.   :4809   Max.   :533.0   Max.   :412.1   Max.   :20.060  
 checkableDeposits  loansLeases    savingsDeposits  tradeCurrencies 
 Min.   : 381.1    Min.   :269.9   Min.   : 868.1   Min.   : 175.6  
 1st Qu.: 555.3    1st Qu.:394.7   1st Qu.:1339.6   1st Qu.: 721.0  
 Median : 796.0    Median :567.4   Median :2023.9   Median : 947.9  
 Mean   : 813.3    Mean   :549.7   Mean   :1959.1   Mean   : 954.7  
 3rd Qu.:1080.5    3rd Qu.:658.8   3rd Qu.:2407.5   3rd Qu.:1197.4  
 Max.   :1154.1    Max.   :803.4   Max.   :3550.3   Max.   :1758.1  
  MonthCDRate    
 Min.   : 3.020  
 1st Qu.: 5.370  
 Median : 6.610  
 Mean   : 7.522  
 3rd Qu.: 8.820  
 Max.   :20.760  
    \end{verbatim}

    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}3}]:} \PY{c+c1}{\PYZsh{} Calculamos la media y la desviación estándar de las variables.}
        media \PY{o}{=} \PY{k+kp}{sapply}\PY{p}{(}treasury\PY{p}{,}\PY{k+kp}{mean}\PY{p}{)}
        desviacion \PY{o}{=} \PY{k+kp}{sapply}\PY{p}{(}treasury\PY{p}{,}sd\PY{p}{)}
        
        \PY{c+c1}{\PYZsh{} Mostramos los valores.}
        med\PYZus{}desv \PY{o}{=} \PY{k+kp}{cbind}\PY{p}{(}media\PY{p}{,}desviacion\PY{p}{)}
        med\PYZus{}desv
\end{Verbatim}


    \begin{tabular}{r|ll}
  & media & desviacion\\
\hline
	CMaturityRate\_1Y &   97.353633 &   14.471441\\
	CMortgageRate\_30Y &    7.543937 &    3.105787\\
	Rate\_AuctionAverage\_3M &   10.400848 &    2.958872\\
	Rate\_SecondaryMarket\_3M &    6.851220 &    2.954287\\
	CMaturityRate\_3Y &    6.829342 &    2.942284\\
	CMaturityRate\_5Y &    8.117378 &    2.883880\\
	bankCredit &    8.359104 &    2.766248\\
	currency & 2639.677312 & 1010.520574\\
	demandDeposits &  256.847664 &  114.575372\\
	federalFunds &  308.115443 &   59.805094\\
	moneyStock &    7.549495 &    3.538662\\
	checkableDeposits &  813.330410 &  258.688545\\
	loansLeases &  549.687417 &  157.072519\\
	savingsDeposits & 1959.121830 &  720.531058\\
	tradeCurrencies &  954.669399 &  372.292523\\
	MonthCDRate &    7.521945 &    3.377216\\
\end{tabular}


    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}4}]:} \PY{c+c1}{\PYZsh{} Ahora pasaremos a pintar las distribuciones de cada una de las variables, para ello, utilizaremos una }
        \PY{c+c1}{\PYZsh{} gráfica de densidad de cada una de las variables ya que son datos reales.}
        
        \PY{c+c1}{\PYZsh{} Cargamos librería para mostrar los datos.}
        \PY{k+kn}{library}\PY{p}{(}ggplot2\PY{p}{)}
        
        \PY{c+c1}{\PYZsh{} Pintamos los gráficos de densidad de cada una de las variables. En naranja se muestra la media de dicha variable,}
        \PY{c+c1}{\PYZsh{} en rojo, se muestra la mediana de dicha variable. Con la función ..count.. especificamos que queremos saber el número}
        \PY{c+c1}{\PYZsh{} de casos en vez de la densidad.}
        ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}CMaturityRate\PYZus{}1Y\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}density\PY{p}{(}aes\PY{p}{(}y\PY{o}{=}\PY{l+m}{.}\PY{l+m}{.}count..\PY{p}{)}\PY{p}{,}fill\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{lightblue\PYZsq{}}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} \PY{k+kp}{mean}\PY{p}{(}CMaturityRate\PYZus{}1Y\PY{p}{)}\PY{p}{,}color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{mean\PYZdq{}}\PY{p}{)}\PY{p}{,} 
                     linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} median\PY{p}{(}CMaturityRate\PYZus{}1Y\PY{p}{)}\PY{p}{,}color\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{median\PYZdq{}}\PY{p}{)}\PY{p}{,}
                          linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6} \PY{p}{)} \PY{o}{+}
                scale\PYZus{}color\PYZus{}manual\PY{p}{(}name \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{statistics\PYZdq{}}\PY{p}{,} values \PY{o}{=} \PY{k+kt}{c}\PY{p}{(}mean \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZsh{}FC4E07\PYZdq{}}\PY{p}{,} median \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{blue\PYZdq{}}\PY{p}{)}\PY{p}{)}
        
        ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}CMortgageRate\PYZus{}30Y\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}density\PY{p}{(}aes\PY{p}{(}y\PY{o}{=}\PY{l+m}{.}\PY{l+m}{.}count..\PY{p}{)}\PY{p}{,}fill\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{lightblue\PYZsq{}}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} \PY{k+kp}{mean}\PY{p}{(}CMortgageRate\PYZus{}30Y\PY{p}{)}\PY{p}{,}color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{mean\PYZdq{}}\PY{p}{)}\PY{p}{,} 
                     linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} median\PY{p}{(}CMortgageRate\PYZus{}30Y\PY{p}{)}\PY{p}{,}color\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{median\PYZdq{}}\PY{p}{)}\PY{p}{,}
                          linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6} \PY{p}{)} \PY{o}{+}
                scale\PYZus{}color\PYZus{}manual\PY{p}{(}name \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{statistics\PYZdq{}}\PY{p}{,} values \PY{o}{=} \PY{k+kt}{c}\PY{p}{(}mean \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZsh{}FC4E07\PYZdq{}}\PY{p}{,} median \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{blue\PYZdq{}}\PY{p}{)}\PY{p}{)}
        
        ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}Rate\PYZus{}AuctionAverage\PYZus{}3M\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}density\PY{p}{(}aes\PY{p}{(}y\PY{o}{=}\PY{l+m}{.}\PY{l+m}{.}count..\PY{p}{)}\PY{p}{,}fill\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{lightblue\PYZsq{}}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} \PY{k+kp}{mean}\PY{p}{(}Rate\PYZus{}AuctionAverage\PYZus{}3M\PY{p}{)}\PY{p}{,}color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{mean\PYZdq{}}\PY{p}{)}\PY{p}{,} 
                     linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} median\PY{p}{(}Rate\PYZus{}AuctionAverage\PYZus{}3M\PY{p}{)}\PY{p}{,}color\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{median\PYZdq{}}\PY{p}{)}\PY{p}{,}
                          linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6} \PY{p}{)} \PY{o}{+}
                scale\PYZus{}color\PYZus{}manual\PY{p}{(}name \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{statistics\PYZdq{}}\PY{p}{,} values \PY{o}{=} \PY{k+kt}{c}\PY{p}{(}mean \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZsh{}FC4E07\PYZdq{}}\PY{p}{,} median \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{blue\PYZdq{}}\PY{p}{)}\PY{p}{)}
        
        ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}Rate\PYZus{}SecondaryMarket\PYZus{}3M\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}density\PY{p}{(}aes\PY{p}{(}y\PY{o}{=}\PY{l+m}{.}\PY{l+m}{.}count..\PY{p}{)}\PY{p}{,}fill\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{lightblue\PYZsq{}}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} \PY{k+kp}{mean}\PY{p}{(}Rate\PYZus{}SecondaryMarket\PYZus{}3M\PY{p}{)}\PY{p}{,}color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{mean\PYZdq{}}\PY{p}{)}\PY{p}{,} 
                     linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} median\PY{p}{(}Rate\PYZus{}SecondaryMarket\PYZus{}3M\PY{p}{)}\PY{p}{,}color\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{median\PYZdq{}}\PY{p}{)}\PY{p}{,}
                          linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6} \PY{p}{)} \PY{o}{+}
                scale\PYZus{}color\PYZus{}manual\PY{p}{(}name \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{statistics\PYZdq{}}\PY{p}{,} values \PY{o}{=} \PY{k+kt}{c}\PY{p}{(}mean \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZsh{}FC4E07\PYZdq{}}\PY{p}{,} median \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{blue\PYZdq{}}\PY{p}{)}\PY{p}{)}
        
        ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}CMaturityRate\PYZus{}3Y\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}density\PY{p}{(}aes\PY{p}{(}y\PY{o}{=}\PY{l+m}{.}\PY{l+m}{.}count..\PY{p}{)}\PY{p}{,}fill\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{lightblue\PYZsq{}}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} \PY{k+kp}{mean}\PY{p}{(}CMaturityRate\PYZus{}3Y\PY{p}{)}\PY{p}{,}color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{mean\PYZdq{}}\PY{p}{)}\PY{p}{,} 
                     linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} median\PY{p}{(}CMaturityRate\PYZus{}3Y\PY{p}{)}\PY{p}{,}color\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{median\PYZdq{}}\PY{p}{)}\PY{p}{,}
                          linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6} \PY{p}{)} \PY{o}{+}
                scale\PYZus{}color\PYZus{}manual\PY{p}{(}name \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{statistics\PYZdq{}}\PY{p}{,} values \PY{o}{=} \PY{k+kt}{c}\PY{p}{(}mean \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZsh{}FC4E07\PYZdq{}}\PY{p}{,} median \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{blue\PYZdq{}}\PY{p}{)}\PY{p}{)}
        
        ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}CMaturityRate\PYZus{}5Y\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}density\PY{p}{(}aes\PY{p}{(}y\PY{o}{=}\PY{l+m}{.}\PY{l+m}{.}count..\PY{p}{)}\PY{p}{,}fill\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{lightblue\PYZsq{}}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} \PY{k+kp}{mean}\PY{p}{(}CMaturityRate\PYZus{}5Y\PY{p}{)}\PY{p}{,}color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{mean\PYZdq{}}\PY{p}{)}\PY{p}{,} 
                     linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} median\PY{p}{(}CMaturityRate\PYZus{}5Y\PY{p}{)}\PY{p}{,}color\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{median\PYZdq{}}\PY{p}{)}\PY{p}{,}
                          linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6} \PY{p}{)} \PY{o}{+}
                scale\PYZus{}color\PYZus{}manual\PY{p}{(}name \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{statistics\PYZdq{}}\PY{p}{,} values \PY{o}{=} \PY{k+kt}{c}\PY{p}{(}mean \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZsh{}FC4E07\PYZdq{}}\PY{p}{,} median \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{blue\PYZdq{}}\PY{p}{)}\PY{p}{)}
        
        ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}bankCredit\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}density\PY{p}{(}aes\PY{p}{(}y\PY{o}{=}\PY{l+m}{.}\PY{l+m}{.}count..\PY{p}{)}\PY{p}{,}fill\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{lightblue\PYZsq{}}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} \PY{k+kp}{mean}\PY{p}{(}bankCredit\PY{p}{)}\PY{p}{,}color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{mean\PYZdq{}}\PY{p}{)}\PY{p}{,} 
                     linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} median\PY{p}{(}bankCredit\PY{p}{)}\PY{p}{,}color\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{median\PYZdq{}}\PY{p}{)}\PY{p}{,}
                          linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6} \PY{p}{)} \PY{o}{+}
                scale\PYZus{}color\PYZus{}manual\PY{p}{(}name \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{statistics\PYZdq{}}\PY{p}{,} values \PY{o}{=} \PY{k+kt}{c}\PY{p}{(}mean \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZsh{}FC4E07\PYZdq{}}\PY{p}{,} median \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{blue\PYZdq{}}\PY{p}{)}\PY{p}{)}
        
        ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}currency\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}density\PY{p}{(}aes\PY{p}{(}y\PY{o}{=}\PY{l+m}{.}\PY{l+m}{.}count..\PY{p}{)}\PY{p}{,}fill\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{lightblue\PYZsq{}}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} \PY{k+kp}{mean}\PY{p}{(}currency\PY{p}{)}\PY{p}{,}color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{mean\PYZdq{}}\PY{p}{)}\PY{p}{,} 
                     linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} median\PY{p}{(}currency\PY{p}{)}\PY{p}{,}color\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{median\PYZdq{}}\PY{p}{)}\PY{p}{,}
                          linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6} \PY{p}{)} \PY{o}{+}
                scale\PYZus{}color\PYZus{}manual\PY{p}{(}name \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{statistics\PYZdq{}}\PY{p}{,} values \PY{o}{=} \PY{k+kt}{c}\PY{p}{(}mean \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZsh{}FC4E07\PYZdq{}}\PY{p}{,} median \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{blue\PYZdq{}}\PY{p}{)}\PY{p}{)}
        
        ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}demandDeposits\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}density\PY{p}{(}aes\PY{p}{(}y\PY{o}{=}\PY{l+m}{.}\PY{l+m}{.}count..\PY{p}{)}\PY{p}{,}fill\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{lightblue\PYZsq{}}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} \PY{k+kp}{mean}\PY{p}{(}demandDeposits\PY{p}{)}\PY{p}{,}color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{mean\PYZdq{}}\PY{p}{)}\PY{p}{,} 
                     linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} median\PY{p}{(}demandDeposits\PY{p}{)}\PY{p}{,}color\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{median\PYZdq{}}\PY{p}{)}\PY{p}{,}
                          linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6} \PY{p}{)} \PY{o}{+}
                scale\PYZus{}color\PYZus{}manual\PY{p}{(}name \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{statistics\PYZdq{}}\PY{p}{,} values \PY{o}{=} \PY{k+kt}{c}\PY{p}{(}mean \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZsh{}FC4E07\PYZdq{}}\PY{p}{,} median \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{blue\PYZdq{}}\PY{p}{)}\PY{p}{)}
        
        ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}federalFunds\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}density\PY{p}{(}aes\PY{p}{(}y\PY{o}{=}\PY{l+m}{.}\PY{l+m}{.}count..\PY{p}{)}\PY{p}{,}fill\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{lightblue\PYZsq{}}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} \PY{k+kp}{mean}\PY{p}{(}federalFunds\PY{p}{)}\PY{p}{,}color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{mean\PYZdq{}}\PY{p}{)}\PY{p}{,} 
                     linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} median\PY{p}{(}federalFunds\PY{p}{)}\PY{p}{,}color\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{median\PYZdq{}}\PY{p}{)}\PY{p}{,}
                          linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6} \PY{p}{)} \PY{o}{+}
                scale\PYZus{}color\PYZus{}manual\PY{p}{(}name \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{statistics\PYZdq{}}\PY{p}{,} values \PY{o}{=} \PY{k+kt}{c}\PY{p}{(}mean \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZsh{}FC4E07\PYZdq{}}\PY{p}{,} median \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{blue\PYZdq{}}\PY{p}{)}\PY{p}{)}
        
        ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}moneyStock\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}density\PY{p}{(}aes\PY{p}{(}y\PY{o}{=}\PY{l+m}{.}\PY{l+m}{.}count..\PY{p}{)}\PY{p}{,}fill\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{lightblue\PYZsq{}}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} \PY{k+kp}{mean}\PY{p}{(}moneyStock\PY{p}{)}\PY{p}{,}color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{mean\PYZdq{}}\PY{p}{)}\PY{p}{,} 
                     linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} median\PY{p}{(}moneyStock\PY{p}{)}\PY{p}{,}color\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{median\PYZdq{}}\PY{p}{)}\PY{p}{,}
                          linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6} \PY{p}{)} \PY{o}{+}
                scale\PYZus{}color\PYZus{}manual\PY{p}{(}name \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{statistics\PYZdq{}}\PY{p}{,} values \PY{o}{=} \PY{k+kt}{c}\PY{p}{(}mean \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZsh{}FC4E07\PYZdq{}}\PY{p}{,} median \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{blue\PYZdq{}}\PY{p}{)}\PY{p}{)}
        
        ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}checkableDeposits\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}density\PY{p}{(}aes\PY{p}{(}y\PY{o}{=}\PY{l+m}{.}\PY{l+m}{.}count..\PY{p}{)}\PY{p}{,}fill\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{lightblue\PYZsq{}}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} \PY{k+kp}{mean}\PY{p}{(}checkableDeposits\PY{p}{)}\PY{p}{,}color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{mean\PYZdq{}}\PY{p}{)}\PY{p}{,} 
                     linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} median\PY{p}{(}checkableDeposits\PY{p}{)}\PY{p}{,}color\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{median\PYZdq{}}\PY{p}{)}\PY{p}{,}
                          linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6} \PY{p}{)} \PY{o}{+}
                scale\PYZus{}color\PYZus{}manual\PY{p}{(}name \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{statistics\PYZdq{}}\PY{p}{,} values \PY{o}{=} \PY{k+kt}{c}\PY{p}{(}mean \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZsh{}FC4E07\PYZdq{}}\PY{p}{,} median \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{blue\PYZdq{}}\PY{p}{)}\PY{p}{)}
        
        ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}loansLeases\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}density\PY{p}{(}aes\PY{p}{(}y\PY{o}{=}\PY{l+m}{.}\PY{l+m}{.}count..\PY{p}{)}\PY{p}{,}fill\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{lightblue\PYZsq{}}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} \PY{k+kp}{mean}\PY{p}{(}loansLeases\PY{p}{)}\PY{p}{,}color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{mean\PYZdq{}}\PY{p}{)}\PY{p}{,} 
                     linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} median\PY{p}{(}loansLeases\PY{p}{)}\PY{p}{,}color\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{median\PYZdq{}}\PY{p}{)}\PY{p}{,}
                          linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6} \PY{p}{)} \PY{o}{+}
                scale\PYZus{}color\PYZus{}manual\PY{p}{(}name \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{statistics\PYZdq{}}\PY{p}{,} values \PY{o}{=} \PY{k+kt}{c}\PY{p}{(}mean \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZsh{}FC4E07\PYZdq{}}\PY{p}{,} median \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{blue\PYZdq{}}\PY{p}{)}\PY{p}{)}
        
        ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}savingsDeposits\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}density\PY{p}{(}aes\PY{p}{(}y\PY{o}{=}\PY{l+m}{.}\PY{l+m}{.}count..\PY{p}{)}\PY{p}{,}fill\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{lightblue\PYZsq{}}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} \PY{k+kp}{mean}\PY{p}{(}savingsDeposits\PY{p}{)}\PY{p}{,}color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{mean\PYZdq{}}\PY{p}{)}\PY{p}{,} 
                     linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} median\PY{p}{(}savingsDeposits\PY{p}{)}\PY{p}{,}color\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{median\PYZdq{}}\PY{p}{)}\PY{p}{,}
                          linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6} \PY{p}{)} \PY{o}{+}
                scale\PYZus{}color\PYZus{}manual\PY{p}{(}name \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{statistics\PYZdq{}}\PY{p}{,} values \PY{o}{=} \PY{k+kt}{c}\PY{p}{(}mean \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZsh{}FC4E07\PYZdq{}}\PY{p}{,} median \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{blue\PYZdq{}}\PY{p}{)}\PY{p}{)}
        
        ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}tradeCurrencies\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}density\PY{p}{(}aes\PY{p}{(}y\PY{o}{=}\PY{l+m}{.}\PY{l+m}{.}count..\PY{p}{)}\PY{p}{,}fill\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{lightblue\PYZsq{}}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} \PY{k+kp}{mean}\PY{p}{(}tradeCurrencies\PY{p}{)}\PY{p}{,}color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{mean\PYZdq{}}\PY{p}{)}\PY{p}{,} 
                     linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} median\PY{p}{(}tradeCurrencies\PY{p}{)}\PY{p}{,}color\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{median\PYZdq{}}\PY{p}{)}\PY{p}{,}
                          linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6} \PY{p}{)} \PY{o}{+}
                scale\PYZus{}color\PYZus{}manual\PY{p}{(}name \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{statistics\PYZdq{}}\PY{p}{,} values \PY{o}{=} \PY{k+kt}{c}\PY{p}{(}mean \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZsh{}FC4E07\PYZdq{}}\PY{p}{,} median \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{blue\PYZdq{}}\PY{p}{)}\PY{p}{)}
        
        ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}MonthCDRate\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}density\PY{p}{(}aes\PY{p}{(}y\PY{o}{=}\PY{l+m}{.}\PY{l+m}{.}count..\PY{p}{)}\PY{p}{,}fill\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{lightblue\PYZsq{}}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} \PY{k+kp}{mean}\PY{p}{(}MonthCDRate\PY{p}{)}\PY{p}{,}color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{mean\PYZdq{}}\PY{p}{)}\PY{p}{,} 
                     linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} median\PY{p}{(}MonthCDRate\PY{p}{)}\PY{p}{,}color\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{median\PYZdq{}}\PY{p}{)}\PY{p}{,}
                          linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6} \PY{p}{)} \PY{o}{+}
                scale\PYZus{}color\PYZus{}manual\PY{p}{(}name \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{statistics\PYZdq{}}\PY{p}{,} values \PY{o}{=} \PY{k+kt}{c}\PY{p}{(}mean \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZsh{}FC4E07\PYZdq{}}\PY{p}{,} median \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{blue\PYZdq{}}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_7_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_7_4.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_7_6.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_7_8.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_7_10.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_7_12.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_7_14.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_7_16.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_7_18.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_7_20.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_7_22.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_7_24.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_7_26.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_7_28.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_7_30.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_7_31.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    Según la información que se puede ver en las gráficas, ninguna de las
variables cuenta con una distribución normal; así que más adelante habrá
que probar a transformar dichas variables para intentar que se parezcan
más a una distribución normal, por ejemplo las variables donde la
mayoría de los datos se encuentran al principio pueden mejorar su
distribución con una transformación logarítmica.

Además según lo visto gracias a la información que nos aporta la función
\emph{summary()}, ninguna de las variables contiene \emph{NAs}, así que
no es necesario hacer imputación de valores o borrar ningún dato.

Además de los gráficos de densidad, utilizaremos los boxplots para ver
si existen outliers dentro de los datos. También probaremos a
transformar los datos para ver si mejora su distribución.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}5}]:} \PY{c+c1}{\PYZsh{} Pintamos los boxplots. En rojo se muestran ( si es que hay) los outliers.}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}CMaturityRate\PYZus{}1Y\PY{p}{)}\PY{p}{)}\PY{o}{+} geom\PYZus{}boxplot\PY{p}{(}outlier.color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{red\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}CMortgageRate\PYZus{}30Y\PY{p}{)}\PY{p}{)}\PY{o}{+} geom\PYZus{}boxplot\PY{p}{(}outlier.color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{red\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}Rate\PYZus{}AuctionAverage\PYZus{}3M\PY{p}{)}\PY{p}{)}\PY{o}{+} geom\PYZus{}boxplot\PY{p}{(}outlier.color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{red\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}Rate\PYZus{}SecondaryMarket\PYZus{}3M\PY{p}{)}\PY{p}{)}\PY{o}{+} geom\PYZus{}boxplot\PY{p}{(}outlier.color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{red\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}CMaturityRate\PYZus{}3Y\PY{p}{)}\PY{p}{)}\PY{o}{+} geom\PYZus{}boxplot\PY{p}{(}outlier.color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{red\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}CMaturityRate\PYZus{}5Y\PY{p}{)}\PY{p}{)}\PY{o}{+} geom\PYZus{}boxplot\PY{p}{(}outlier.color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{red\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}bankCredit\PY{p}{)}\PY{p}{)}\PY{o}{+} geom\PYZus{}boxplot\PY{p}{(}outlier.color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{red\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}currency\PY{p}{)}\PY{p}{)}\PY{o}{+} geom\PYZus{}boxplot\PY{p}{(}outlier.color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{red\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}demandDeposits\PY{p}{)}\PY{p}{)}\PY{o}{+} geom\PYZus{}boxplot\PY{p}{(}outlier.color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{red\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}federalFunds\PY{p}{)}\PY{p}{)}\PY{o}{+} geom\PYZus{}boxplot\PY{p}{(}outlier.color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{red\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}moneyStock\PY{p}{)}\PY{p}{)}\PY{o}{+} geom\PYZus{}boxplot\PY{p}{(}outlier.color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{red\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}checkableDeposits\PY{p}{)}\PY{p}{)}\PY{o}{+} geom\PYZus{}boxplot\PY{p}{(}outlier.color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{red\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}loansLeases\PY{p}{)}\PY{p}{)}\PY{o}{+} geom\PYZus{}boxplot\PY{p}{(}outlier.color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{red\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}savingsDeposits\PY{p}{)}\PY{p}{)}\PY{o}{+} geom\PYZus{}boxplot\PY{p}{(}outlier.color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{red\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}tradeCurrencies\PY{p}{)}\PY{p}{)}\PY{o}{+} geom\PYZus{}boxplot\PY{p}{(}outlier.color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{red\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}MonthCDRate\PY{p}{)}\PY{p}{)}\PY{o}{+} geom\PYZus{}boxplot\PY{p}{(}outlier.color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{red\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_9_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_9_4.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_9_6.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_9_8.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_9_10.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_9_12.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_9_14.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_9_16.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_9_18.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_9_20.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_9_22.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_9_24.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_9_26.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_9_28.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_9_30.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_9_31.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    Como se puede ver en los resultados gráficos anteriores, las variables
CMaturityRate\_1Y, CMortgageRate\_30Y, Rate\_SecondaryMarket\_3M,
CMaturityRate\_3Y, CMaturityRate\_5Y, bankCredit, moneyStock y
MonthCDRate contienen outliers. En principio no los eliminaremos ya que
pueden ser casos extremos que nos aporten cierta información en el
modelo.

Por último, dibujaremos las correlaciones entre las variables.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}6}]:} \PY{c+c1}{\PYZsh{} Dibujamos las correlaciones entre las variables.}
        pairs\PY{p}{(}treasury\PY{p}{,}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{,} main\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{Correlaciones de los datos\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_11_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}7}]:} cor\PY{p}{(}treasury\PY{p}{)}
\end{Verbatim}


    \begin{tabular}{r|llllllllllllllll}
  & CMaturityRate\_1Y & CMortgageRate\_30Y & Rate\_AuctionAverage\_3M & Rate\_SecondaryMarket\_3M & CMaturityRate\_3Y & CMaturityRate\_5Y & bankCredit & currency & demandDeposits & federalFunds & moneyStock & checkableDeposits & loansLeases & savingsDeposits & tradeCurrencies & MonthCDRate\\
\hline
	CMaturityRate\_1Y &  1.0000000 &  0.5289173 &  0.6500870 &  0.4788677 &  0.4818779 &  0.6023984 &  0.6250722 & -0.5741093 & -0.5515314 & -0.6408934 &  0.4560397 & -0.6838618 & -0.7161397 & -0.5672793 & -0.4763829 &  0.4507399\\
	CMortgageRate\_30Y &  0.5289173 &  1.0000000 &  0.9367248 &  0.9864352 &  0.9874777 &  0.9849371 &  0.9668119 & -0.7523409 & -0.7174992 & -0.7367525 &  0.9692879 & -0.8378256 & -0.8471908 & -0.7420812 & -0.8255995 &  0.9772895\\
	Rate\_AuctionAverage\_3M &  0.6500870 &  0.9367248 &  1.0000000 &  0.8997102 &  0.8986080 &  0.9717959 &  0.9806363 & -0.8729493 & -0.8396140 & -0.8545196 &  0.8893533 & -0.9201255 & -0.8927273 & -0.8674640 & -0.8941019 &  0.8868518\\
	Rate\_SecondaryMarket\_3M &  0.4788677 &  0.9864352 &  0.8997102 &  1.0000000 &  0.9977408 &  0.9527171 &  0.9287190 & -0.7235480 & -0.6917304 & -0.7133572 &  0.9848922 & -0.8185177 & -0.8343992 & -0.7119274 & -0.8078303 &  0.9903362\\
	CMaturityRate\_3Y &  0.4818779 &  0.9874777 &  0.8986080 &  0.9977408 &  1.0000000 &  0.9536684 &  0.9295766 & -0.7247399 & -0.6932254 & -0.7152727 &  0.9861269 & -0.8198067 & -0.8354147 & -0.7130192 & -0.8071159 &  0.9917367\\
	CMaturityRate\_5Y &  0.6023984 &  0.9849371 &  0.9717959 &  0.9527171 &  0.9536684 &  1.0000000 &  0.9955387 & -0.8044921 & -0.7703285 & -0.7914913 &  0.9300853 & -0.8705364 & -0.8622077 & -0.7958332 & -0.8499892 &  0.9378451\\
	bankCredit &  0.6250722 &  0.9668119 &  0.9806363 &  0.9287190 &  0.9295766 &  0.9955387 &  1.0000000 & -0.8338960 & -0.7997921 & -0.8168239 &  0.9040410 & -0.8837260 & -0.8622840 & -0.8273161 & -0.8651072 &  0.9106219\\
	currency & -0.5741093 & -0.7523409 & -0.8729493 & -0.7235480 & -0.7247399 & -0.8044921 & -0.8338960 &  1.0000000 &  0.9912600 &  0.8881952 & -0.7189738 &  0.9340624 &  0.8049866 &  0.9977185 &  0.9531331 & -0.7070180\\
	demandDeposits & -0.5515314 & -0.7174992 & -0.8396140 & -0.6917304 & -0.6932254 & -0.7703285 & -0.7997921 &  0.9912600 &  1.0000000 &  0.9059379 & -0.6899164 &  0.9252762 &  0.7844607 &  0.9826211 &  0.9319984 & -0.6783867\\
	federalFunds & -0.6408934 & -0.7367525 & -0.8545196 & -0.7133572 & -0.7152727 & -0.7914913 & -0.8168239 &  0.8881952 &  0.9059379 &  1.0000000 & -0.7072023 &  0.9374450 &  0.8731687 &  0.8663811 &  0.8259606 & -0.7021663\\
	moneyStock &  0.4560397 &  0.9692879 &  0.8893533 &  0.9848922 &  0.9861269 &  0.9300853 &  0.9040410 & -0.7189738 & -0.6899164 & -0.7072023 &  1.0000000 & -0.8178985 & -0.8347681 & -0.7063516 & -0.8060014 &  0.9946502\\
	checkableDeposits & -0.6838618 & -0.8378256 & -0.9201255 & -0.8185177 & -0.8198067 & -0.8705364 & -0.8837260 &  0.9340624 &  0.9252762 &  0.9374450 & -0.8178985 &  1.0000000 &  0.9610653 &  0.9189515 &  0.9123665 & -0.8086956\\
	loansLeases & -0.7161397 & -0.8471908 & -0.8927273 & -0.8343992 & -0.8354147 & -0.8622077 & -0.8622840 &  0.8049866 &  0.7844607 &  0.8731687 & -0.8347681 &  0.9610653 &  1.0000000 &  0.7864516 &  0.8127696 & -0.8280948\\
	savingsDeposits & -0.5672793 & -0.7420812 & -0.8674640 & -0.7119274 & -0.7130192 & -0.7958332 & -0.8273161 &  0.9977185 &  0.9826211 &  0.8663811 & -0.7063516 &  0.9189515 &  0.7864516 &  1.0000000 &  0.9502578 & -0.6939530\\
	tradeCurrencies & -0.4763829 & -0.8255995 & -0.8941019 & -0.8078303 & -0.8071159 & -0.8499892 & -0.8651072 &  0.9531331 &  0.9319984 &  0.8259606 & -0.8060014 &  0.9123665 &  0.8127696 &  0.9502578 &  1.0000000 & -0.7931364\\
	MonthCDRate &  0.4507399 &  0.9772895 &  0.8868518 &  0.9903362 &  0.9917367 &  0.9378451 &  0.9106219 & -0.7070180 & -0.6783867 & -0.7021663 &  0.9946502 & -0.8086956 & -0.8280948 & -0.6939530 & -0.7931364 &  1.0000000\\
\end{tabular}


    
    Según lo que se puede ver en la gráfica y la tabla anterior, muchas de
las variables que tenemos pueden estar relacionadas, como
\emph{Rate\_SecondaryMarket\_3M} con \emph{CMaturityRate\_3Y} o
\emph{CMaturityRate\_5Y} con \emph{bankCredit}. También se puede ver
como algunas variables, como por ejemplo \emph{CMortgageRato\_30Y},
\emph{Rate\_SecondaryMarket\_3M}, \emph{CMaturityRate\_3Y} y
\emph{moneyStock} tienen una relación lineal con respecto a la variable
que tenemos que predecir, esto puede ser interesante a la hora de crear
un modelo lineal con dichas variables.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}8}]:} ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}MonthCDRate\PY{p}{,}x\PY{o}{=}CMaturityRate\PYZus{}1Y\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}MonthCDRate\PY{p}{,}x\PY{o}{=}CMortgageRate\PYZus{}30Y\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}MonthCDRate\PY{p}{,}x\PY{o}{=}Rate\PYZus{}AuctionAverage\PYZus{}3M\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}MonthCDRate\PY{p}{,}x\PY{o}{=}Rate\PYZus{}SecondaryMarket\PYZus{}3M\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}MonthCDRate\PY{p}{,}x\PY{o}{=}CMaturityRate\PYZus{}3Y\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}MonthCDRate\PY{p}{,}x\PY{o}{=}CMaturityRate\PYZus{}5Y\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}MonthCDRate\PY{p}{,}x\PY{o}{=}bankCredit\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}MonthCDRate\PY{p}{,}x\PY{o}{=}currency\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}MonthCDRate\PY{p}{,}x\PY{o}{=}demandDeposits\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}MonthCDRate\PY{p}{,}x\PY{o}{=}federalFunds\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}MonthCDRate\PY{p}{,}x\PY{o}{=}moneyStock\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}MonthCDRate\PY{p}{,}x\PY{o}{=}checkableDeposits\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}MonthCDRate\PY{p}{,}x\PY{o}{=}loansLeases\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}MonthCDRate\PY{p}{,}x\PY{o}{=}savingsDeposits\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
        ggplot\PY{p}{(}treasury\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}MonthCDRate\PY{p}{,}x\PY{o}{=}tradeCurrencies\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_14_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_14_4.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_14_6.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_14_8.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_14_10.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_14_12.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_14_14.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_14_16.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_14_18.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_14_20.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_14_22.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_14_24.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_14_26.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_14_28.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_14_29.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    Como se puede ver en algunos casos parece haber relaciones lineales
entre algunas variables y la variable que queremos predecir, en otros
casos no existe ninguna relación, por ello habrá que intentar
transformarlas o pasar más tarde a hacer interacciones o añadir
cuadrados/logaritmos a los modelos que hagamos.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}9}]:} \PY{c+c1}{\PYZsh{} Copiamos una variable del dataset para ver como le afectaría las transformaciones.}
        temp \PY{o}{=} treasury\PY{o}{\PYZdl{}}moneyStock
        
        log.temp \PY{o}{=} \PY{k+kt}{data.frame}\PY{p}{(}log.data\PY{o}{=}\PY{k+kp}{log}\PY{p}{(}temp\PY{p}{)}\PY{p}{)}
        log.temp\PY{o}{\PYZdl{}}MonthCDRate \PY{o}{=} treasury\PY{o}{\PYZdl{}}MonthCDRate
        ggplot\PY{p}{(}log.temp\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}log.data\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}density\PY{p}{(}aes\PY{p}{(}y\PY{o}{=}\PY{l+m}{.}\PY{l+m}{.}count..\PY{p}{)}\PY{p}{,}fill\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{lightblue\PYZsq{}}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} \PY{k+kp}{mean}\PY{p}{(}log.data\PY{p}{)}\PY{p}{,}color \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{mean\PYZdq{}}\PY{p}{)}\PY{p}{,} 
                     linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6}\PY{p}{)} \PY{o}{+}
                geom\PYZus{}vline\PY{p}{(}aes\PY{p}{(}xintercept \PY{o}{=} median\PY{p}{(}log.data\PY{p}{)}\PY{p}{,}color\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{median\PYZdq{}}\PY{p}{)}\PY{p}{,}
                          linetype \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{dashed\PYZdq{}}\PY{p}{,} size \PY{o}{=} \PY{l+m}{0.6} \PY{p}{)} \PY{o}{+}
                scale\PYZus{}color\PYZus{}manual\PY{p}{(}name \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{statistics\PYZdq{}}\PY{p}{,} values \PY{o}{=} \PY{k+kt}{c}\PY{p}{(}mean \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZsh{}FC4E07\PYZdq{}}\PY{p}{,} median \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{blue\PYZdq{}}\PY{p}{)}\PY{p}{)}
        
        ggplot\PY{p}{(}log.temp\PY{p}{,} aes\PY{p}{(}y\PY{o}{=}MonthCDRate\PY{p}{,}x\PY{o}{=}log.data\PY{p}{)}\PY{p}{)} \PY{o}{+} geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
        
        \PY{k+kp}{print}\PY{p}{(}cor\PY{p}{(}log.temp\PY{p}{)}\PY{p}{)}
        \PY{k+kp}{print}\PY{p}{(}cor\PY{p}{(}treasury\PY{o}{\PYZdl{}}moneyStock\PY{p}{,} treasury\PY{o}{\PYZdl{}}MonthCDRate\PY{p}{)}\PY{p}{)}
        \PY{c+c1}{\PYZsh{} Para este caso, es mejor no transformar la variable, ya que como se puede ver, pierde la relación lineal con nuestra}
        \PY{c+c1}{\PYZsh{} variable predictora.}
\end{Verbatim}


    
    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_16_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
             log.data MonthCDRate
log.data    1.0000000   0.9561623
MonthCDRate 0.9561623   1.0000000
[1] 0.9946502

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_16_4.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{resumen}{%
\subsubsection{Resumen}\label{resumen}}

Para finalizar esta parte haremos un pequeño resumen de lo que se ha
visto anteriormente. * El dataset está formado por 1049 entradas, cada
entrada cuenta con 15 variables, todas ellas continuas. Estas variables
se tratan de diferentes datos sobre la economía de EEUU. También cuenta
con una última variable llamada \emph{MonthCDRate}, también continua,
que contiene la tasa de interés que debe aplicarse a un producto
financiero por un mes; esta es la variable que se debe predecir. * Tras
el cálculo de las medias y de la desviación típica, parece que los datos
tienen bastante dispersión. * Ninguna de las variables del conjunto de
datos tienen una distribución normal, por lo que habrá que
transformarlas para intentar que se asemejen más a dicha distribución.
Por ejemplo, para las variables cuya distribución se parece a una normal
pero están más a la izquierda, una transformación logaritmica puede
ayudar. * Algunas de las variables contienen outliers, en principio no
los eliminaremos pero si que puede ser necesario eliminar algún dato
suelto para las variables que se ajustan bien a un modelo lineal para
que no afecten a los modelos. * Algunas variables parecen estar
correlacionadas, por lo cual puede ser interesante ver como afecta a los
modelos quitar algunas de estas variables o realizar interacciones entre
ellas, de forma que podamos obtener más información sobre el problema
que estamos estudiando.

    \hypertarget{creaciuxf3n-de-modelos-para-el-dataset.}{%
\subsection{Creación de modelos para el
dataset.}\label{creaciuxf3n-de-modelos-para-el-dataset.}}

En este apartado se verá la creación de modelos de regresión para
predecir el valor de la variable \emph{MonthCDRate}; para ello, se
utilizarán modelos primero modelos de regresión lineal simple. Tras esto
se pasará a utilizar modelos de regresión múltiple, a los cuales se les
añadirá si es necesario o beneficia al modelo interacciones y no
linealidad. Por último se aplicará el algoritmo de KNN.

    \hypertarget{modelos-de-regresiuxf3n-lineal.}{%
\subsubsection{Modelos de regresión
lineal.}\label{modelos-de-regresiuxf3n-lineal.}}

En este apartado se van a estudiar cinco modelos de regresión lineal.
Para estos modelos se utilizarán las variables que más se ajusten a una
línea; dichas variables son \emph{CMortgageRate\_30Y},
\emph{Rate\_SecondaryMarket\_3M},
\emph{CMaturityRate\_3Y},\emph{CMaturityRate\_5Y} y \emph{moneyStock}
(se pueden mirar los scatterplots entre \emph{MonthCDRate} y el resto de
variables en el apartado anterior).

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}10}]:} \PY{c+c1}{\PYZsh{} Creamos el modelo.}
         fit1 \PY{o}{=} lm\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMortgageRate\PYZus{}30Y\PY{p}{,} data\PY{o}{=}treasury\PY{p}{)}
         \PY{k+kp}{summary}\PY{p}{(}fit1\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Dibujamos el ajuste.}
         confint\PY{p}{(}fit1\PY{p}{)}
         ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}CMortgageRate\PYZus{}30Y\PY{p}{,}y\PY{o}{=}MonthCDRate\PY{p}{)}\PY{p}{)} \PY{o}{+} 
             geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

Call:
lm(formula = MonthCDRate ~ CMortgageRate_30Y, data = treasury)

Residuals:
    Min      1Q  Median      3Q     Max 
-2.1273 -0.3047 -0.0005  0.2845  5.0385 

Coefficients:
                   Estimate Std. Error t value Pr(>|t|)    
(Intercept)       -0.494992   0.058094  -8.521   <2e-16 ***
CMortgageRate_30Y  1.062699   0.007121 149.227   <2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.716 on 1047 degrees of freedom
Multiple R-squared:  0.9551,	Adjusted R-squared:  0.9551 
F-statistic: 2.227e+04 on 1 and 1047 DF,  p-value: < 2.2e-16

    \end{verbatim}

    
    \begin{tabular}{r|ll}
  & 2.5 \% & 97.5 \%\\
\hline
	(Intercept) & -0.6089848 & -0.3809985\\
	CMortgageRate\_30Y &  1.0487255 &  1.0766730\\
\end{tabular}


    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_20_3.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}11}]:} \PY{c+c1}{\PYZsh{} Creamos el modelo.}
         fit2 \PY{o}{=} lm\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}Rate\PYZus{}SecondaryMarket\PYZus{}3M\PY{p}{,} data\PY{o}{=}treasury\PY{p}{)}
         \PY{k+kp}{summary}\PY{p}{(}fit2\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Dibujamos el ajuste.}
         confint\PY{p}{(}fit2\PY{p}{)}
         ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}Rate\PYZus{}SecondaryMarket\PYZus{}3M\PY{p}{,}y\PY{o}{=}MonthCDRate\PY{p}{)}\PY{p}{)} \PY{o}{+} 
             geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

Call:
lm(formula = MonthCDRate ~ Rate_SecondaryMarket_3M, data = treasury)

Residuals:
    Min      1Q  Median      3Q     Max 
-1.6394 -0.2313 -0.0473  0.1691  4.4752 

Coefficients:
                        Estimate Std. Error t value Pr(>|t|)    
(Intercept)             -0.23439    0.03655  -6.412 2.17e-10 ***
Rate_SecondaryMarket_3M  1.13211    0.00490 231.057  < 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.4686 on 1047 degrees of freedom
Multiple R-squared:  0.9808,	Adjusted R-squared:  0.9807 
F-statistic: 5.339e+04 on 1 and 1047 DF,  p-value: < 2.2e-16

    \end{verbatim}

    
    \begin{tabular}{r|ll}
  & 2.5 \% & 97.5 \%\\
\hline
	(Intercept) & -0.3061209 & -0.1626654\\
	Rate\_SecondaryMarket\_3M &  1.1224961 &  1.1417248\\
\end{tabular}


    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_21_3.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}12}]:} \PY{c+c1}{\PYZsh{} Creamos el modelo.}
         fit3 \PY{o}{=} lm\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMaturityRate\PYZus{}3Y\PY{p}{,} data\PY{o}{=}treasury\PY{p}{)}
         \PY{k+kp}{summary}\PY{p}{(}fit3\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Dibujamos el ajuste.}
         confint\PY{p}{(}fit3\PY{p}{)}
         ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}CMaturityRate\PYZus{}3Y\PY{p}{,}y\PY{o}{=}MonthCDRate\PY{p}{)}\PY{p}{)} \PY{o}{+} 
             geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

Call:
lm(formula = MonthCDRate ~ CMaturityRate_3Y, data = treasury)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.09409 -0.20977 -0.04589  0.16718  2.83967 

Coefficients:
                  Estimate Std. Error t value Pr(>|t|)    
(Intercept)      -0.252144   0.033839  -7.451 1.93e-13 ***
CMaturityRate_3Y  1.138336   0.004551 250.137  < 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.4335 on 1047 degrees of freedom
Multiple R-squared:  0.9835,	Adjusted R-squared:  0.9835 
F-statistic: 6.257e+04 on 1 and 1047 DF,  p-value: < 2.2e-16

    \end{verbatim}

    
    \begin{tabular}{r|ll}
  & 2.5 \% & 97.5 \%\\
\hline
	(Intercept) & -0.3185431 & -0.185745 \\
	CMaturityRate\_3Y &  1.1294066 &  1.147266 \\
\end{tabular}


    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_22_3.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}13}]:} \PY{c+c1}{\PYZsh{} Creamos el modelo.}
         fit4 \PY{o}{=} lm\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMaturityRate\PYZus{}5Y\PY{p}{,} data\PY{o}{=}treasury\PY{p}{)}
         \PY{k+kp}{summary}\PY{p}{(}fit4\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Dibujamos el ajuste.}
         confint\PY{p}{(}fit4\PY{p}{)}
         ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}CMaturityRate\PYZus{}5Y\PY{p}{,}y\PY{o}{=}MonthCDRate\PY{p}{)}\PY{p}{)} \PY{o}{+} 
             geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

Call:
lm(formula = MonthCDRate ~ CMaturityRate_5Y, data = treasury)

Residuals:
    Min      1Q  Median      3Q     Max 
-2.7461 -0.7861 -0.0870  0.5551  6.5906 

Coefficients:
                 Estimate Std. Error t value Pr(>|t|)    
(Intercept)      -1.39320    0.10820  -12.88   <2e-16 ***
CMaturityRate_5Y  1.09828    0.01256   87.44   <2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1.173 on 1047 degrees of freedom
Multiple R-squared:  0.8796,	Adjusted R-squared:  0.8794 
F-statistic:  7646 on 1 and 1047 DF,  p-value: < 2.2e-16

    \end{verbatim}

    
    \begin{tabular}{r|ll}
  & 2.5 \% & 97.5 \%\\
\hline
	(Intercept) & -1.605508 & -1.180898\\
	CMaturityRate\_5Y &  1.073633 &  1.122926\\
\end{tabular}


    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_23_3.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}14}]:} \PY{c+c1}{\PYZsh{} Creamos el modelo.}
         fit5 \PY{o}{=} lm\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}moneyStock\PY{p}{,} data\PY{o}{=}treasury\PY{p}{)}
         \PY{k+kp}{summary}\PY{p}{(}fit5\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Dibujamos el ajuste.}
         confint\PY{p}{(}fit5\PY{p}{)}
         ggplot\PY{p}{(}treasury\PY{p}{,}aes\PY{p}{(}x\PY{o}{=}moneyStock\PY{p}{,}y\PY{o}{=}MonthCDRate\PY{p}{)}\PY{p}{)} \PY{o}{+} 
             geom\PYZus{}point\PY{p}{(}col\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{deepskyblue\PYZdq{}}\PY{p}{)} \PY{o}{+} geom\PYZus{}smooth\PY{p}{(}method\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{lm\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

Call:
lm(formula = MonthCDRate ~ moneyStock, data = treasury)

Residuals:
     Min       1Q   Median       3Q      Max 
-2.35798 -0.11996 -0.01642  0.10068  2.01779 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept) 0.355430   0.025401   13.99   <2e-16 ***
moneyStock  0.949271   0.003047  311.56   <2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.349 on 1047 degrees of freedom
Multiple R-squared:  0.9893,	Adjusted R-squared:  0.9893 
F-statistic: 9.707e+04 on 1 and 1047 DF,  p-value: < 2.2e-16

    \end{verbatim}

    
    \begin{tabular}{r|ll}
  & 2.5 \% & 97.5 \%\\
\hline
	(Intercept) & 0.3055867 & 0.4052736\\
	moneyStock & 0.9432921 & 0.9552494\\
\end{tabular}


    
    
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_24_3.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    Según lo visto en cada uno de los modelos, el mejor modelo es el
aportado por la variable \emph{moneyStock}; aunque el modelo con la
variable \emph{CMaturityRate\_3Y} también es muy parecido. Para elegir
el mejor modelo se ha mirado los valores del estadísitico R\^{}2
Ajustado, donde \emph{moneyStock} tiene el valor más alto (0.9893).

También a través de los modelos realizados, podemos ver que las
variables analizadas tiene una relación positiva con la variable
\emph{MonthCDRate}, por ello, si aumenta el valor de \emph{MonthCDRate}
el valor de las otras variables también debe ser mayor.

Aunque solamente nos quedemos en este caso con el modelo de la variable
\emph{moneyStock}, hay que decir que para todos los modelos sale un
p-valor muy bajo, lo cual quiere decir que son importantes para predecir
el valor de la variable y por ello serán considerados cuando se vayan a
crear modelos de regresión múltiple. Además, los modelos lineales
simples obtenidos son bastante buenos y por ello seguramente el modelo
de regresión múltiple obtenido no mejorará mucho los resultados de
estos.

Ahora probaremos a hacer validación cruzada con las particiones del
dataset que se han proprocionado junto con el dataset; para comprobar si
hay sobreajuste y la calidad de nuestro mejor modelo obtenido.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}15}]:} nombre \PY{o}{\PYZlt{}\PYZhy{}} \PY{l+s}{\PYZdq{}}\PY{l+s}{treasury//treasury\PYZdq{}}
         run\PYZus{}lm\PYZus{}fold \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kr}{function}\PY{p}{(}i\PY{p}{,} x\PY{p}{,} tt \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{test\PYZdq{}}\PY{p}{)} \PY{p}{\PYZob{}}
             file \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{paste}\PY{p}{(}x\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZhy{}5\PYZhy{}\PYZdq{}}\PY{p}{,} i\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{tra.dat\PYZdq{}}\PY{p}{,} sep\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdq{}}\PY{p}{)}
             x\PYZus{}tra \PY{o}{\PYZlt{}\PYZhy{}} read.csv\PY{p}{(}\PY{k+kp}{file}\PY{p}{,} comment.char\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{@\PYZdq{}}\PY{p}{,} header\PY{o}{=}\PY{k+kc}{FALSE}\PY{p}{)}
             file \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{paste}\PY{p}{(}x\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZhy{}5\PYZhy{}\PYZdq{}}\PY{p}{,} i\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{tst.dat\PYZdq{}}\PY{p}{,} sep\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdq{}}\PY{p}{)}
             x\PYZus{}tst \PY{o}{\PYZlt{}\PYZhy{}} read.csv\PY{p}{(}\PY{k+kp}{file}\PY{p}{,} comment.char\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{@\PYZdq{}}\PY{p}{,} header\PY{o}{=}\PY{k+kc}{FALSE}\PY{p}{)}
             In \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{length}\PY{p}{(}\PY{k+kp}{names}\PY{p}{(}x\PYZus{}tra\PY{p}{)}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{l+m}{1}
             \PY{k+kp}{names}\PY{p}{(}x\PYZus{}tra\PY{p}{)}\PY{p}{[}\PY{l+m}{1}\PY{o}{:}In\PY{p}{]} \PY{o}{\PYZlt{}\PYZhy{}} paste \PY{p}{(}\PY{l+s}{\PYZdq{}}\PY{l+s}{X\PYZdq{}}\PY{p}{,} \PY{l+m}{1}\PY{o}{:}In\PY{p}{,} sep\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdq{}}\PY{p}{)}
             \PY{k+kp}{names}\PY{p}{(}x\PYZus{}tra\PY{p}{)}\PY{p}{[}In\PY{l+m}{+1}\PY{p}{]} \PY{o}{\PYZlt{}\PYZhy{}} \PY{l+s}{\PYZdq{}}\PY{l+s}{Y\PYZdq{}}
             \PY{k+kp}{names}\PY{p}{(}x\PYZus{}tst\PY{p}{)}\PY{p}{[}\PY{l+m}{1}\PY{o}{:}In\PY{p}{]} \PY{o}{\PYZlt{}\PYZhy{}} paste \PY{p}{(}\PY{l+s}{\PYZdq{}}\PY{l+s}{X\PYZdq{}}\PY{p}{,} \PY{l+m}{1}\PY{o}{:}In\PY{p}{,} sep\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdq{}}\PY{p}{)}
             \PY{k+kp}{names}\PY{p}{(}x\PYZus{}tst\PY{p}{)}\PY{p}{[}In\PY{l+m}{+1}\PY{p}{]} \PY{o}{\PYZlt{}\PYZhy{}} \PY{l+s}{\PYZdq{}}\PY{l+s}{Y\PYZdq{}}
             \PY{k+kr}{if} \PY{p}{(}tt \PY{o}{==} \PY{l+s}{\PYZdq{}}\PY{l+s}{train\PYZdq{}}\PY{p}{)} \PY{p}{\PYZob{}}
                 test \PY{o}{\PYZlt{}\PYZhy{}} x\PYZus{}tra
             \PY{p}{\PYZcb{}}
             \PY{k+kr}{else} \PY{p}{\PYZob{}}
                 test \PY{o}{\PYZlt{}\PYZhy{}} x\PYZus{}tst
             \PY{p}{\PYZcb{}}
             fitMulti\PY{o}{=}lm\PY{p}{(}Y\PY{o}{\PYZti{}}X11\PY{p}{,}x\PYZus{}tra\PY{p}{)}
             yprime\PY{o}{=}predict\PY{p}{(}fitMulti\PY{p}{,}test\PY{p}{)}
             \PY{k+kp}{sum}\PY{p}{(}\PY{k+kp}{abs}\PY{p}{(}test\PY{o}{\PYZdl{}}Y\PY{o}{\PYZhy{}}yprime\PY{p}{)}\PY{o}{\PYZca{}}\PY{l+m}{2}\PY{p}{)}\PY{o}{/}\PY{k+kp}{length}\PY{p}{(}yprime\PY{p}{)} \PY{c+c1}{\PYZsh{}\PYZsh{}MSE}
         \PY{p}{\PYZcb{}}
         lmMSEtrain.simple\PY{o}{\PYZlt{}\PYZhy{}}\PY{k+kp}{mean}\PY{p}{(}\PY{k+kp}{sapply}\PY{p}{(}\PY{l+m}{1}\PY{o}{:}\PY{l+m}{5}\PY{p}{,}run\PYZus{}lm\PYZus{}fold\PY{p}{,}nombre\PY{p}{,}\PY{l+s}{\PYZdq{}}\PY{l+s}{train\PYZdq{}}\PY{p}{)}\PY{p}{)}
         lmMSEtest.simple\PY{o}{\PYZlt{}\PYZhy{}}\PY{k+kp}{mean}\PY{p}{(}\PY{k+kp}{sapply}\PY{p}{(}\PY{l+m}{1}\PY{o}{:}\PY{l+m}{5}\PY{p}{,}run\PYZus{}lm\PYZus{}fold\PY{p}{,}nombre\PY{p}{,}\PY{l+s}{\PYZdq{}}\PY{l+s}{test\PYZdq{}}\PY{p}{)}\PY{p}{)}
         \PY{k+kp}{cat}\PY{p}{(}\PY{l+s}{\PYZdq{}}\PY{l+s}{train: \PYZdq{}}\PY{p}{,}lmMSEtrain.simple\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}n\PYZdq{}}\PY{p}{)}
         \PY{k+kp}{cat}\PY{p}{(}\PY{l+s}{\PYZdq{}}\PY{l+s}{test: \PYZdq{}}\PY{p}{,}lmMSEtest.simple\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}n\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
train:  0.1215525 
test:  0.1219177 

    \end{Verbatim}

    Como podemos ver, los resultados del MSE de los datos de train y test
son iguales, por lo que podemos concluir que no hay sobreajuste y que
nuestro modelo se ajusta bien a los datos.

    \hypertarget{modelos-de-regresiuxf3n-muxfaltiple}{%
\subsubsection{Modelos de regresión
múltiple}\label{modelos-de-regresiuxf3n-muxfaltiple}}

En este apartado se van a probar diferentes modelos de regresión lineal
múltiple; para ello probaremos diferentes modelos con diferentes
variables y probando interaciones entre las variables.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}16}]:} \PY{c+c1}{\PYZsh{} Creamos el modelo}
         fit.multiple1 \PY{o}{=} lm\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}\PY{l+m}{.}\PY{p}{,} treasury\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Comprobamos los resultados}
         \PY{k+kp}{summary}\PY{p}{(}fit.multiple1\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

Call:
lm(formula = MonthCDRate ~ ., data = treasury)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.15400 -0.11350 -0.02425  0.06447  1.98636 

Coefficients:
                          Estimate Std. Error t value Pr(>|t|)    
(Intercept)              0.3888300  0.2922598   1.330  0.18367    
CMaturityRate_1Y        -0.0078034  0.0010164  -7.677 3.75e-14 ***
CMortgageRate_30Y        0.1872664  0.0625423   2.994  0.00282 ** 
Rate_AuctionAverage_3M  -0.0177122  0.0212776  -0.832  0.40536    
Rate_SecondaryMarket_3M  0.0471672  0.0384214   1.228  0.21987    
CMaturityRate_3Y         0.2464712  0.0478963   5.146 3.18e-07 ***
CMaturityRate_5Y         0.1558061  0.1131354   1.377  0.16876    
bankCredit              -0.1422313  0.0770943  -1.845  0.06534 .  
currency                 0.0017686  0.0004687   3.773  0.00017 ***
demandDeposits           0.0191436  0.0103577   1.848  0.06485 .  
federalFunds             0.0001295  0.0005897   0.220  0.82618    
moneyStock               0.5811069  0.0158907  36.569  < 2e-16 ***
checkableDeposits       -0.0260884  0.0103044  -2.532  0.01150 *  
loansLeases              0.0254454  0.0103785   2.452  0.01438 *  
savingsDeposits         -0.0013883  0.0004364  -3.181  0.00151 ** 
tradeCurrencies          0.0005457  0.0001040   5.247 1.88e-07 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.2377 on 1033 degrees of freedom
Multiple R-squared:  0.9951,	Adjusted R-squared:  0.995 
F-statistic: 1.403e+04 on 15 and 1033 DF,  p-value: < 2.2e-16

    \end{verbatim}

    
    Como se puede ver en los resultados, el modelo con todas las variables
mejora el resultado del mejor modelo de con una sola variable
(\emph{moneyStock}). Aún así, podemos ver que algunas de las variables
obtenidas no aportan ninguna información para el modelo, como por
ejemplo \emph{Rate\_SecondaryMarket\_3M}, que para el modelo lineal
simple obtenia muy buenos resultados.

Lo siguientte que haremos será probar un modelo que combine solamente
las variables que tienen un p-valor bajo dentro del modelo con todas las
variables.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}17}]:} \PY{c+c1}{\PYZsh{} Creamos el modelo}
         fit.multiple2 \PY{o}{=} lm\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMaturityRate\PYZus{}1Y\PY{o}{+}CMortgageRate\PYZus{}30Y\PY{o}{+}CMaturityRate\PYZus{}3Y\PY{o}{+}
                            bankCredit\PY{o}{+}currency\PY{o}{+}demandDeposits\PY{o}{+}moneyStock\PY{o}{+}
                            checkableDeposits\PY{o}{+}loansLeases\PY{o}{+}savingsDeposits\PY{o}{+}
                            tradeCurrencies\PY{p}{,} treasury\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Comprobamos los resultados}
         \PY{k+kp}{summary}\PY{p}{(}fit.multiple2\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

Call:
lm(formula = MonthCDRate ~ CMaturityRate_1Y + CMortgageRate_30Y + 
    CMaturityRate_3Y + bankCredit + currency + demandDeposits + 
    moneyStock + checkableDeposits + loansLeases + savingsDeposits + 
    tradeCurrencies, data = treasury)

Residuals:
    Min      1Q  Median      3Q     Max 
-1.1827 -0.1114 -0.0232  0.0627  1.9784 

Coefficients:
                    Estimate Std. Error t value Pr(>|t|)    
(Intercept)        2.409e-01  1.717e-01   1.403 0.160860    
CMaturityRate_1Y  -7.480e-03  9.642e-04  -7.758 2.06e-14 ***
CMortgageRate_30Y  2.675e-01  3.280e-02   8.154 1.01e-15 ***
CMaturityRate_3Y   2.781e-01  2.669e-02  10.423  < 2e-16 ***
bankCredit        -6.094e-02  2.051e-02  -2.972 0.003031 ** 
currency           1.530e-03  4.408e-04   3.472 0.000539 ***
demandDeposits     1.857e-02  1.034e-02   1.797 0.072700 .  
moneyStock         5.767e-01  1.365e-02  42.242  < 2e-16 ***
checkableDeposits -2.501e-02  1.027e-02  -2.434 0.015104 *  
loansLeases        2.448e-02  1.035e-02   2.364 0.018249 *  
savingsDeposits   -1.133e-03  3.984e-04  -2.844 0.004547 ** 
tradeCurrencies    5.656e-04  9.808e-05   5.766 1.07e-08 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.2377 on 1037 degrees of freedom
Multiple R-squared:  0.9951,	Adjusted R-squared:  0.995 
F-statistic: 1.915e+04 on 11 and 1037 DF,  p-value: < 2.2e-16

    \end{verbatim}

    
    Para este caso, el valor de R\^{}2 ajustado no ha cambiado, por lo cual
es mejor que el modelo anterior. Lo siguiente seguirá seguir quitando
variables que tengan poca imporancia para el modelo, como
\emph{demanDeposits} o \emph{checkableDeposits}.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}18}]:} \PY{c+c1}{\PYZsh{} Creamos el modelo}
         fit.multiple3 \PY{o}{=} lm\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMaturityRate\PYZus{}1Y\PY{o}{+}CMortgageRate\PYZus{}30Y\PY{o}{+}CMaturityRate\PYZus{}3Y\PY{o}{+}
                            currency\PY{o}{+}moneyStock\PY{o}{+}tradeCurrencies\PY{p}{,} treasury\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Comprobamos los resultados}
         \PY{k+kp}{summary}\PY{p}{(}fit.multiple3\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

Call:
lm(formula = MonthCDRate ~ CMaturityRate_1Y + CMortgageRate_30Y + 
    CMaturityRate_3Y + currency + moneyStock + tradeCurrencies, 
    data = treasury)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.18774 -0.12047 -0.02864  0.06229  2.02888 

Coefficients:
                    Estimate Std. Error t value Pr(>|t|)    
(Intercept)       -9.455e-02  8.788e-02  -1.076    0.282    
CMaturityRate_1Y  -7.145e-03  7.530e-04  -9.488  < 2e-16 ***
CMortgageRate_30Y  1.490e-01  1.765e-02   8.441  < 2e-16 ***
CMaturityRate_3Y   3.316e-01  2.520e-02  13.159  < 2e-16 ***
currency          -1.233e-04  3.011e-05  -4.095 4.56e-05 ***
moneyStock         6.015e-01  1.334e-02  45.089  < 2e-16 ***
tradeCurrencies    7.414e-04  9.134e-05   8.117 1.33e-15 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.245 on 1042 degrees of freedom
Multiple R-squared:  0.9948,	Adjusted R-squared:  0.9947 
F-statistic: 3.302e+04 on 6 and 1042 DF,  p-value: < 2.2e-16

    \end{verbatim}

    
    Al igual que en el modelo anterior, no empeora el resultados conforme al
modelo anterior, por lo que nos quedaremos con este.Ahora, probaremos
otro modelo con todas las variables que han utilizado para el modelo de
regresión simple. Además se probarán con alguna interación entre
variables o al cuadrado para intentar mejorar algo más los resultados.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}19}]:} \PY{c+c1}{\PYZsh{} Creamos el modelo}
         fit.multiple4 \PY{o}{=} lm\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMortgageRate\PYZus{}30Y\PY{o}{+}CMaturityRate\PYZus{}3Y\PY{o}{+}
                            CMaturityRate\PYZus{}5Y\PY{o}{+}moneyStock\PY{o}{+}Rate\PYZus{}SecondaryMarket\PYZus{}3M\PY{p}{,} treasury\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Comprobamos los resultados}
         \PY{k+kp}{summary}\PY{p}{(}fit.multiple4\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

Call:
lm(formula = MonthCDRate ~ CMortgageRate_30Y + CMaturityRate_3Y + 
    CMaturityRate_5Y + moneyStock + Rate_SecondaryMarket_3M, 
    data = treasury)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.45339 -0.11979 -0.03982  0.07518  2.05279 

Coefficients:
                        Estimate Std. Error t value Pr(>|t|)    
(Intercept)              0.27634    0.03183   8.680  < 2e-16 ***
CMortgageRate_30Y        0.37978    0.03974   9.556  < 2e-16 ***
CMaturityRate_3Y         0.26208    0.04618   5.675 1.79e-08 ***
CMaturityRate_5Y        -0.21904    0.02248  -9.743  < 2e-16 ***
moneyStock               0.56423    0.01396  40.431  < 2e-16 ***
Rate_SecondaryMarket_3M  0.01592    0.04084   0.390    0.697    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.2581 on 1043 degrees of freedom
Multiple R-squared:  0.9942,	Adjusted R-squared:  0.9942 
F-statistic: 3.568e+04 on 5 and 1043 DF,  p-value: < 2.2e-16

    \end{verbatim}

    
    Para este modelo también podemos ver que no hay demasiada pérdida
conforme con los modelos anteriores. Lo que sí es importantes de este
modelo es que nos demuestra \emph{Rate\_SecondaryMarket\_3M} realmente
no afecta a la predicción de la variable \emph{MonthCDRate}.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}20}]:} \PY{c+c1}{\PYZsh{} Creamos el modelo}
         fit.multiple5 \PY{o}{=} lm\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMortgageRate\PYZus{}30Y\PY{o}{+}CMaturityRate\PYZus{}3Y\PY{o}{+}
                            CMaturityRate\PYZus{}5Y\PY{o}{+}moneyStock\PY{p}{,} treasury\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Comprobamos los resultados}
         \PY{k+kp}{summary}\PY{p}{(}fit.multiple5\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

Call:
lm(formula = MonthCDRate ~ CMortgageRate_30Y + CMaturityRate_3Y + 
    CMaturityRate_5Y + moneyStock, data = treasury)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.44602 -0.11957 -0.03963  0.07661  2.05333 

Coefficients:
                  Estimate Std. Error t value Pr(>|t|)    
(Intercept)        0.27727    0.03173   8.738   <2e-16 ***
CMortgageRate_30Y  0.38190    0.03935   9.705   <2e-16 ***
CMaturityRate_3Y   0.27593    0.02949   9.357   <2e-16 ***
CMaturityRate_5Y  -0.21984    0.02238  -9.823   <2e-16 ***
moneyStock         0.56477    0.01388  40.685   <2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.258 on 1044 degrees of freedom
Multiple R-squared:  0.9942,	Adjusted R-squared:  0.9942 
F-statistic: 4.463e+04 on 4 and 1044 DF,  p-value: < 2.2e-16

    \end{verbatim}

    
    Para crear modelos con interación o no linealidad se probará con
variables que parezca estar algo relacionadas del modelo
\emph{fit.multiple3} o que el ajuste lineal sea muy pobre.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}21}]:} \PY{c+c1}{\PYZsh{} Creamos el modelo}
         fit.multiple6 \PY{o}{=} lm\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMaturityRate\PYZus{}1Y\PY{o}{+}CMortgageRate\PYZus{}30Y\PY{o}{+}CMaturityRate\PYZus{}3Y\PY{o}{+}
                            currency\PY{o}{+}moneyStock\PY{o}{+}tradeCurrencies\PY{o}{+}\PY{k+kp}{I}\PY{p}{(}tradeCurrencies\PY{o}{\PYZca{}}\PY{l+m}{2}\PY{p}{)}\PY{p}{,} treasury\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Comprobamos los resultados}
         \PY{k+kp}{summary}\PY{p}{(}fit.multiple6\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

Call:
lm(formula = MonthCDRate ~ CMaturityRate_1Y + CMortgageRate_30Y + 
    CMaturityRate_3Y + currency + moneyStock + tradeCurrencies + 
    I(tradeCurrencies^2), data = treasury)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.20281 -0.11938 -0.02789  0.06348  2.03541 

Coefficients:
                       Estimate Std. Error t value Pr(>|t|)    
(Intercept)          -1.186e-02  1.213e-01  -0.098    0.922    
CMaturityRate_1Y     -7.302e-03  7.697e-04  -9.487  < 2e-16 ***
CMortgageRate_30Y     1.471e-01  1.776e-02   8.283 3.65e-16 ***
CMaturityRate_3Y      3.354e-01  2.549e-02  13.156  < 2e-16 ***
currency             -1.377e-04  3.343e-05  -4.117 4.14e-05 ***
moneyStock            5.984e-01  1.371e-02  43.639  < 2e-16 ***
tradeCurrencies       6.649e-04  1.197e-04   5.553 3.57e-08 ***
I(tradeCurrencies^2)  5.276e-08  5.339e-08   0.988    0.323    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.245 on 1041 degrees of freedom
Multiple R-squared:  0.9948,	Adjusted R-squared:  0.9947 
F-statistic: 2.83e+04 on 7 and 1041 DF,  p-value: < 2.2e-16

    \end{verbatim}

    
    Para \emph{tradeCurrencies}\^{}2 vemos que no aporta nada al modelo, así
que lo quitaremos y probaremos con otras variables.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}22}]:} \PY{c+c1}{\PYZsh{} Creamos el modelo}
         fit.multiple7 \PY{o}{=} lm\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMaturityRate\PYZus{}1Y\PY{o}{+}CMortgageRate\PYZus{}30Y\PY{o}{+}CMaturityRate\PYZus{}3Y\PY{o}{+}
                            currency\PY{o}{+}moneyStock\PY{o}{+}tradeCurrencies\PY{o}{+}
                            \PY{k+kp}{I}\PY{p}{(}CMaturityRate\PYZus{}1Y\PY{o}{*}currency\PY{p}{)}\PY{p}{,} treasury\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Comprobamos los resultados}
         \PY{k+kp}{summary}\PY{p}{(}fit.multiple7\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Creamos el modelo}
         fit.multiple8 \PY{o}{=} lm\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMaturityRate\PYZus{}1Y\PY{o}{+}CMortgageRate\PYZus{}30Y\PY{o}{+}CMaturityRate\PYZus{}3Y\PY{o}{+}
                            currency\PY{o}{+}moneyStock\PY{o}{+}tradeCurrencies\PY{o}{+}
                            \PY{k+kp}{I}\PY{p}{(}CMortgageRate\PYZus{}30Y\PY{o}{*}moneyStock\PY{p}{)}\PY{p}{,} treasury\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Comprobamos los resultados}
         \PY{k+kp}{summary}\PY{p}{(}fit.multiple8\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

Call:
lm(formula = MonthCDRate ~ CMaturityRate_1Y + CMortgageRate_30Y + 
    CMaturityRate_3Y + currency + moneyStock + tradeCurrencies + 
    I(CMaturityRate_1Y * currency), data = treasury)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.21353 -0.11637 -0.02756  0.05733  2.02936 

Coefficients:
                                 Estimate Std. Error t value Pr(>|t|)    
(Intercept)                     1.016e+00  2.786e-01   3.646 0.000279 ***
CMaturityRate_1Y               -1.807e-02  2.709e-03  -6.671 4.12e-11 ***
CMortgageRate_30Y               1.602e-01  1.771e-02   9.042  < 2e-16 ***
CMaturityRate_3Y                3.318e-01  2.500e-02  13.275  < 2e-16 ***
currency                       -6.019e-04  1.179e-04  -5.105 3.92e-07 ***
moneyStock                      5.876e-01  1.365e-02  43.062  < 2e-16 ***
tradeCurrencies                 5.938e-04  9.721e-05   6.109 1.42e-09 ***
I(CMaturityRate_1Y * currency)  5.538e-06  1.320e-06   4.197 2.94e-05 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.2431 on 1041 degrees of freedom
Multiple R-squared:  0.9949,	Adjusted R-squared:  0.9948 
F-statistic: 2.876e+04 on 7 and 1041 DF,  p-value: < 2.2e-16

    \end{verbatim}

    
    
    \begin{verbatim}

Call:
lm(formula = MonthCDRate ~ CMaturityRate_1Y + CMortgageRate_30Y + 
    CMaturityRate_3Y + currency + moneyStock + tradeCurrencies + 
    I(CMortgageRate_30Y * moneyStock), data = treasury)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.16646 -0.11213 -0.02969  0.06249  2.04527 

Coefficients:
                                    Estimate Std. Error t value Pr(>|t|)    
(Intercept)                       -1.247e-02  9.548e-02  -0.131 0.896083    
CMaturityRate_1Y                  -6.654e-03  7.847e-04  -8.479  < 2e-16 ***
CMortgageRate_30Y                  1.410e-01  1.800e-02   7.835 1.15e-14 ***
CMaturityRate_3Y                   3.289e-01  2.518e-02  13.063  < 2e-16 ***
currency                          -1.156e-04  3.027e-05  -3.819 0.000142 ***
moneyStock                         5.843e-01  1.549e-02  37.731  < 2e-16 ***
tradeCurrencies                    7.060e-04  9.261e-05   7.624 5.54e-14 ***
I(CMortgageRate_30Y * moneyStock)  1.359e-03  6.238e-04   2.178 0.029627 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.2446 on 1041 degrees of freedom
Multiple R-squared:  0.9948,	Adjusted R-squared:  0.9948 
F-statistic: 2.84e+04 on 7 and 1041 DF,  p-value: < 2.2e-16

    \end{verbatim}

    
    Este modelo se puede ver que mejorar algo el modelo anterior, aunque lo
importante es que gracias al modelo podemos saber que entre la variable
\emph{CMaturityRate\_1Y} y \emph{currency} están relacionados. Con el
segundo modelo se puede ver que también existe relación entre
\emph{CMortgageRate\_30Y} y \emph{moneyStock}.

Se ha probado con esta interación porque en la tabla de correlaciones
que hay en el apartado de análisis exploratorio, también se han probado
otras interaciones que tienen un correlación mayor, pero no han dado
buenos resultados. Ahora se mostrará algún ejemplo de interacion que no
funciona.

Lo siguiente será probar no linealidad con las variables.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}23}]:} \PY{c+c1}{\PYZsh{} Creamos el modelo}
         fit.multiple9 \PY{o}{=} lm\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMaturityRate\PYZus{}1Y\PY{o}{+}CMortgageRate\PYZus{}30Y\PY{o}{+}CMaturityRate\PYZus{}3Y\PY{o}{+}
                            currency\PY{o}{+}moneyStock\PY{o}{+}tradeCurrencies\PY{o}{+}
                            \PY{k+kp}{I}\PY{p}{(}CMaturityRate\PYZus{}1Y\PY{o}{*}tradeCurrencies\PY{p}{)}\PY{p}{,} treasury\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Comprobamos los resultados}
         \PY{k+kp}{summary}\PY{p}{(}fit.multiple9\PY{p}{)}
         
         
         \PY{c+c1}{\PYZsh{} Creamos el modelo}
         fit.multiple10 \PY{o}{=} lm\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMaturityRate\PYZus{}1Y\PY{o}{+}CMortgageRate\PYZus{}30Y\PY{o}{+}CMaturityRate\PYZus{}3Y\PY{o}{+}
                            currency\PY{o}{+}moneyStock\PY{o}{+}tradeCurrencies\PY{o}{+}
                            \PY{k+kp}{I}\PY{p}{(}moneyStock\PY{o}{*}tradeCurrencies\PY{p}{)}\PY{p}{,} treasury\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Comprobamos los resultados}
         \PY{k+kp}{summary}\PY{p}{(}fit.multiple10\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

Call:
lm(formula = MonthCDRate ~ CMaturityRate_1Y + CMortgageRate_30Y + 
    CMaturityRate_3Y + currency + moneyStock + tradeCurrencies + 
    I(CMaturityRate_1Y * tradeCurrencies), data = treasury)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.19680 -0.11993 -0.02838  0.05925  2.02634 

Coefficients:
                                        Estimate Std. Error t value Pr(>|t|)
(Intercept)                            1.280e-01  3.007e-01   0.426  0.67051
CMaturityRate_1Y                      -9.407e-03  3.019e-03  -3.116  0.00188
CMortgageRate_30Y                      1.544e-01  1.900e-02   8.129 1.22e-15
CMaturityRate_3Y                       3.259e-01  2.622e-02  12.429  < 2e-16
currency                              -1.146e-04  3.214e-05  -3.566  0.00038
moneyStock                             6.013e-01  1.335e-02  45.048  < 2e-16
tradeCurrencies                        4.418e-04  3.978e-04   1.111  0.26697
I(CMaturityRate_1Y * tradeCurrencies)  2.878e-06  3.719e-06   0.774  0.43924
                                         
(Intercept)                              
CMaturityRate_1Y                      ** 
CMortgageRate_30Y                     ***
CMaturityRate_3Y                      ***
currency                              ***
moneyStock                            ***
tradeCurrencies                          
I(CMaturityRate_1Y * tradeCurrencies)    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.245 on 1041 degrees of freedom
Multiple R-squared:  0.9948,	Adjusted R-squared:  0.9947 
F-statistic: 2.829e+04 on 7 and 1041 DF,  p-value: < 2.2e-16

    \end{verbatim}

    
    
    \begin{verbatim}

Call:
lm(formula = MonthCDRate ~ CMaturityRate_1Y + CMortgageRate_30Y + 
    CMaturityRate_3Y + currency + moneyStock + tradeCurrencies + 
    I(moneyStock * tradeCurrencies), data = treasury)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.19103 -0.12030 -0.02751  0.06255  2.03323 

Coefficients:
                                  Estimate Std. Error t value Pr(>|t|)    
(Intercept)                     -1.128e-01  9.609e-02  -1.174    0.241    
CMaturityRate_1Y                -7.094e-03  7.609e-04  -9.323  < 2e-16 ***
CMortgageRate_30Y                1.491e-01  1.766e-02   8.444  < 2e-16 ***
CMaturityRate_3Y                 3.324e-01  2.527e-02  13.154  < 2e-16 ***
currency                        -1.257e-04  3.057e-05  -4.113 4.21e-05 ***
moneyStock                       6.026e-01  1.353e-02  44.527  < 2e-16 ***
tradeCurrencies                  7.704e-04  1.102e-04   6.992 4.85e-12 ***
I(moneyStock * tradeCurrencies) -3.685e-06  7.845e-06  -0.470    0.639    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.2451 on 1041 degrees of freedom
Multiple R-squared:  0.9948,	Adjusted R-squared:  0.9947 
F-statistic: 2.828e+04 on 7 and 1041 DF,  p-value: < 2.2e-16

    \end{verbatim}

    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}24}]:} \PY{c+c1}{\PYZsh{} Creamos el modelo}
         fit.multiple11 \PY{o}{=} lm\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMaturityRate\PYZus{}1Y\PY{o}{+}CMortgageRate\PYZus{}30Y\PY{o}{+}CMaturityRate\PYZus{}3Y\PY{o}{+}
                            currency\PY{o}{+}moneyStock\PY{o}{+}tradeCurrencies\PY{o}{+}
                            \PY{k+kp}{I}\PY{p}{(}CMaturityRate\PYZus{}1Y\PY{o}{*}\PY{o}{*}\PY{l+m}{2}\PY{p}{)}\PY{p}{,} treasury\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Comprobamos los resultados}
         \PY{k+kp}{summary}\PY{p}{(}fit.multiple11\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

Call:
lm(formula = MonthCDRate ~ CMaturityRate_1Y + CMortgageRate_30Y + 
    CMaturityRate_3Y + currency + moneyStock + tradeCurrencies + 
    I(CMaturityRate_1Y^2), data = treasury)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.18894 -0.12154 -0.02913  0.06259  2.03489 

Coefficients:
                        Estimate Std. Error t value Pr(>|t|)    
(Intercept)           -4.705e-01  4.356e-01  -1.080 0.280326    
CMaturityRate_1Y       3.656e-04  8.556e-03   0.043 0.965929    
CMortgageRate_30Y      1.485e-01  1.766e-02   8.408  < 2e-16 ***
CMaturityRate_3Y       3.345e-01  2.541e-02  13.161  < 2e-16 ***
currency              -1.180e-04  3.071e-05  -3.842 0.000129 ***
moneyStock             5.980e-01  1.392e-02  42.960  < 2e-16 ***
tradeCurrencies        7.211e-04  9.422e-05   7.653 4.46e-14 ***
I(CMaturityRate_1Y^2) -3.503e-05  3.976e-05  -0.881 0.378407    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.245 on 1041 degrees of freedom
Multiple R-squared:  0.9948,	Adjusted R-squared:  0.9947 
F-statistic: 2.83e+04 on 7 and 1041 DF,  p-value: < 2.2e-16

    \end{verbatim}

    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}25}]:} \PY{c+c1}{\PYZsh{} Creamos el modelo}
         fit.multiple12 \PY{o}{=} lm\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMaturityRate\PYZus{}1Y\PY{o}{+}CMortgageRate\PYZus{}30Y\PY{o}{+}CMaturityRate\PYZus{}3Y\PY{o}{+}
                            currency\PY{o}{+}moneyStock\PY{o}{+}tradeCurrencies\PY{o}{+}
                            \PY{k+kp}{I}\PY{p}{(}CMortgageRate\PYZus{}30Y\PY{o}{*}\PY{o}{*}\PY{l+m}{2}\PY{p}{)}\PY{p}{,} treasury\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Comprobamos los resultados}
         \PY{k+kp}{summary}\PY{p}{(}fit.multiple12\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

Call:
lm(formula = MonthCDRate ~ CMaturityRate_1Y + CMortgageRate_30Y + 
    CMaturityRate_3Y + currency + moneyStock + tradeCurrencies + 
    I(CMortgageRate_30Y^2), data = treasury)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.17052 -0.11148 -0.02993  0.06271  2.04476 

Coefficients:
                         Estimate Std. Error t value Pr(>|t|)    
(Intercept)             6.781e-03  9.853e-02   0.069   0.9451    
CMaturityRate_1Y       -6.703e-03  7.766e-04  -8.632  < 2e-16 ***
CMortgageRate_30Y       1.223e-01  2.122e-02   5.763 1.09e-08 ***
CMaturityRate_3Y        3.283e-01  2.519e-02  13.036  < 2e-16 ***
currency               -1.187e-04  3.012e-05  -3.942 8.62e-05 ***
moneyStock              5.997e-01  1.334e-02  44.962  < 2e-16 ***
tradeCurrencies         7.150e-04  9.191e-05   7.779 1.75e-14 ***
I(CMortgageRate_30Y^2)  1.593e-03  7.056e-04   2.258   0.0242 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.2445 on 1041 degrees of freedom
Multiple R-squared:  0.9948,	Adjusted R-squared:  0.9948 
F-statistic: 2.841e+04 on 7 and 1041 DF,  p-value: < 2.2e-16

    \end{verbatim}

    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}26}]:} \PY{c+c1}{\PYZsh{} Creamos el modelo}
         fit.multiple13 \PY{o}{=} lm\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMaturityRate\PYZus{}1Y\PY{o}{+}CMortgageRate\PYZus{}30Y\PY{o}{+}CMaturityRate\PYZus{}3Y\PY{o}{+}
                            currency\PY{o}{+}moneyStock\PY{o}{+}tradeCurrencies\PY{o}{+}
                            \PY{k+kp}{I}\PY{p}{(}CMaturityRate\PYZus{}3Y\PY{o}{*}\PY{o}{*}\PY{l+m}{2}\PY{p}{)}\PY{p}{,} treasury\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Comprobamos los resultados}
         \PY{k+kp}{summary}\PY{p}{(}fit.multiple13\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

Call:
lm(formula = MonthCDRate ~ CMaturityRate_1Y + CMortgageRate_30Y + 
    CMaturityRate_3Y + currency + moneyStock + tradeCurrencies + 
    I(CMaturityRate_3Y^2), data = treasury)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.16154 -0.11232 -0.02877  0.06566  2.05330 

Coefficients:
                        Estimate Std. Error t value Pr(>|t|)    
(Intercept)            1.572e-02  9.448e-02   0.166  0.86789    
CMaturityRate_1Y      -6.361e-03  7.914e-04  -8.038 2.46e-15 ***
CMortgageRate_30Y      1.576e-01  1.780e-02   8.856  < 2e-16 ***
CMaturityRate_3Y       2.831e-01  2.957e-02   9.572  < 2e-16 ***
currency              -1.073e-04  3.043e-05  -3.526  0.00044 ***
moneyStock             5.971e-01  1.336e-02  44.689  < 2e-16 ***
tradeCurrencies        6.791e-04  9.316e-05   7.289 6.16e-13 ***
I(CMaturityRate_3Y^2)  2.356e-03  7.601e-04   3.099  0.00199 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.244 on 1041 degrees of freedom
Multiple R-squared:  0.9948,	Adjusted R-squared:  0.9948 
F-statistic: 2.854e+04 on 7 and 1041 DF,  p-value: < 2.2e-16

    \end{verbatim}

    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}27}]:} \PY{c+c1}{\PYZsh{} Creamos el modelo}
         fit.multiple14 \PY{o}{=} lm\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMaturityRate\PYZus{}1Y\PY{o}{+}CMortgageRate\PYZus{}30Y\PY{o}{+}CMaturityRate\PYZus{}3Y\PY{o}{+}
                            currency\PY{o}{+}moneyStock\PY{o}{+}tradeCurrencies\PY{o}{+}
                            \PY{k+kp}{I}\PY{p}{(}currency\PY{o}{*}\PY{o}{*}\PY{l+m}{2}\PY{p}{)}\PY{p}{,} treasury\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Comprobamos los resultados}
         \PY{k+kp}{summary}\PY{p}{(}fit.multiple14\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

Call:
lm(formula = MonthCDRate ~ CMaturityRate_1Y + CMortgageRate_30Y + 
    CMaturityRate_3Y + currency + moneyStock + tradeCurrencies + 
    I(currency^2), data = treasury)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.20240 -0.11954 -0.02810  0.06546  2.03638 

Coefficients:
                    Estimate Std. Error t value Pr(>|t|)    
(Intercept)        6.264e-02  1.759e-01   0.356   0.7219    
CMaturityRate_1Y  -7.556e-03  8.521e-04  -8.868  < 2e-16 ***
CMortgageRate_30Y  1.483e-01  1.767e-02   8.393  < 2e-16 ***
CMaturityRate_3Y   3.330e-01  2.524e-02  13.197  < 2e-16 ***
currency          -2.015e-04  8.156e-05  -2.470   0.0137 *  
moneyStock         5.987e-01  1.363e-02  43.925  < 2e-16 ***
tradeCurrencies    7.588e-04  9.288e-05   8.170 8.87e-16 ***
I(currency^2)      1.124e-08  1.090e-08   1.031   0.3026    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.245 on 1041 degrees of freedom
Multiple R-squared:  0.9948,	Adjusted R-squared:  0.9947 
F-statistic: 2.83e+04 on 7 and 1041 DF,  p-value: < 2.2e-16

    \end{verbatim}

    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}28}]:} \PY{c+c1}{\PYZsh{} Creamos el modelo}
         fit.multiple15 \PY{o}{=} lm\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMaturityRate\PYZus{}1Y\PY{o}{+}CMortgageRate\PYZus{}30Y\PY{o}{+}CMaturityRate\PYZus{}3Y\PY{o}{+}
                            currency\PY{o}{+}moneyStock\PY{o}{+}tradeCurrencies\PY{o}{+}
                            \PY{k+kp}{I}\PY{p}{(}moneyStock\PY{o}{*}\PY{o}{*}\PY{l+m}{2}\PY{p}{)}\PY{p}{,} treasury\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{} Comprobamos los resultados}
         \PY{k+kp}{summary}\PY{p}{(}fit.multiple15\PY{p}{)}
\end{Verbatim}


    
    \begin{verbatim}

Call:
lm(formula = MonthCDRate ~ CMaturityRate_1Y + CMortgageRate_30Y + 
    CMaturityRate_3Y + currency + moneyStock + tradeCurrencies + 
    I(moneyStock^2), data = treasury)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.16909 -0.11496 -0.02943  0.06247  2.04367 

Coefficients:
                    Estimate Std. Error t value Pr(>|t|)    
(Intercept)       -3.843e-02  9.246e-02  -0.416 0.677774    
CMaturityRate_1Y  -6.692e-03  7.878e-04  -8.494  < 2e-16 ***
CMortgageRate_30Y  1.552e-01  1.792e-02   8.661  < 2e-16 ***
CMaturityRate_3Y   3.310e-01  2.516e-02  13.155  < 2e-16 ***
currency          -1.140e-04  3.046e-05  -3.743 0.000192 ***
moneyStock         5.751e-01  1.909e-02  30.123  < 2e-16 ***
tradeCurrencies    7.032e-04  9.334e-05   7.534 1.07e-13 ***
I(moneyStock^2)    9.766e-04  5.060e-04   1.930 0.053855 .  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.2447 on 1041 degrees of freedom
Multiple R-squared:  0.9948,	Adjusted R-squared:  0.9948 
F-statistic: 2.838e+04 on 7 and 1041 DF,  p-value: < 2.2e-16

    \end{verbatim}

    
    Para los ajustes de no linealidad podemos ver que la gran mayoría de las
variables no aportan nada al modelo, solamente la variable
\emph{CMortgageRate\_30Y} realmente aporta algo, aunque también podemos
ver que para todos los modelos que realizan interaciones entre variables
y no linealidad hacen que la variable \emph{MonthCDRate} pierda
importancia. Por ello, nos quedaremos con los modelos más simples que
tengamos con buenos resultados; estos modelos serán \emph{fit.multiple2}
y \emph{fit.multiple3}.

Probaremos estos modelos con validación cruzada, y nos quedaremos con el
que mejores resultados nos ofrezca para después compararlo con otros
modelos.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}29}]:} nombre \PY{o}{\PYZlt{}\PYZhy{}} \PY{l+s}{\PYZdq{}}\PY{l+s}{treasury//treasury\PYZdq{}}
         
         run\PYZus{}lm\PYZus{}fold \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kr}{function}\PY{p}{(}i\PY{p}{,} x\PY{p}{,} tt \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{test\PYZdq{}}\PY{p}{)} \PY{p}{\PYZob{}}
             file \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{paste}\PY{p}{(}x\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZhy{}5\PYZhy{}\PYZdq{}}\PY{p}{,} i\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{tra.dat\PYZdq{}}\PY{p}{,} sep\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdq{}}\PY{p}{)}
             x\PYZus{}tra \PY{o}{\PYZlt{}\PYZhy{}} read.csv\PY{p}{(}\PY{k+kp}{file}\PY{p}{,} comment.char\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{@\PYZdq{}}\PY{p}{,} header\PY{o}{=}\PY{k+kc}{FALSE}\PY{p}{)}
             file \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{paste}\PY{p}{(}x\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZhy{}5\PYZhy{}\PYZdq{}}\PY{p}{,} i\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{tst.dat\PYZdq{}}\PY{p}{,} sep\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdq{}}\PY{p}{)}
             x\PYZus{}tst \PY{o}{\PYZlt{}\PYZhy{}} read.csv\PY{p}{(}\PY{k+kp}{file}\PY{p}{,} comment.char\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{@\PYZdq{}}\PY{p}{,} header\PY{o}{=}\PY{k+kc}{FALSE}\PY{p}{)}
             In \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{length}\PY{p}{(}\PY{k+kp}{names}\PY{p}{(}x\PYZus{}tra\PY{p}{)}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{l+m}{1}
             \PY{k+kp}{names}\PY{p}{(}x\PYZus{}tra\PY{p}{)}\PY{p}{[}\PY{l+m}{1}\PY{o}{:}In\PY{p}{]} \PY{o}{\PYZlt{}\PYZhy{}} paste \PY{p}{(}\PY{l+s}{\PYZdq{}}\PY{l+s}{X\PYZdq{}}\PY{p}{,} \PY{l+m}{1}\PY{o}{:}In\PY{p}{,} sep\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdq{}}\PY{p}{)}
             \PY{k+kp}{names}\PY{p}{(}x\PYZus{}tra\PY{p}{)}\PY{p}{[}In\PY{l+m}{+1}\PY{p}{]} \PY{o}{\PYZlt{}\PYZhy{}} \PY{l+s}{\PYZdq{}}\PY{l+s}{Y\PYZdq{}}
             \PY{k+kp}{names}\PY{p}{(}x\PYZus{}tst\PY{p}{)}\PY{p}{[}\PY{l+m}{1}\PY{o}{:}In\PY{p}{]} \PY{o}{\PYZlt{}\PYZhy{}} paste \PY{p}{(}\PY{l+s}{\PYZdq{}}\PY{l+s}{X\PYZdq{}}\PY{p}{,} \PY{l+m}{1}\PY{o}{:}In\PY{p}{,} sep\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdq{}}\PY{p}{)}
             \PY{k+kp}{names}\PY{p}{(}x\PYZus{}tst\PY{p}{)}\PY{p}{[}In\PY{l+m}{+1}\PY{p}{]} \PY{o}{\PYZlt{}\PYZhy{}} \PY{l+s}{\PYZdq{}}\PY{l+s}{Y\PYZdq{}}
             \PY{k+kr}{if} \PY{p}{(}tt \PY{o}{==} \PY{l+s}{\PYZdq{}}\PY{l+s}{train\PYZdq{}}\PY{p}{)} \PY{p}{\PYZob{}}
                 test \PY{o}{\PYZlt{}\PYZhy{}} x\PYZus{}tra
             \PY{p}{\PYZcb{}}
             \PY{k+kr}{else} \PY{p}{\PYZob{}}
                 test \PY{o}{\PYZlt{}\PYZhy{}} x\PYZus{}tst
             \PY{p}{\PYZcb{}}
             fitMulti\PY{o}{=}lm\PY{p}{(}Y\PY{o}{\PYZti{}}X1\PY{o}{+}X2\PY{o}{+}X5\PY{o}{+}X7\PY{o}{+}X8\PY{o}{+}X9\PY{o}{+}X11\PY{o}{+}X12\PY{o}{+}X13\PY{o}{+}X14\PY{o}{+}X15\PY{p}{,}x\PYZus{}tra\PY{p}{)}
             yprime\PY{o}{=}predict\PY{p}{(}fitMulti\PY{p}{,}test\PY{p}{)}
             \PY{k+kp}{sum}\PY{p}{(}\PY{k+kp}{abs}\PY{p}{(}test\PY{o}{\PYZdl{}}Y\PY{o}{\PYZhy{}}yprime\PY{p}{)}\PY{o}{\PYZca{}}\PY{l+m}{2}\PY{p}{)}\PY{o}{/}\PY{k+kp}{length}\PY{p}{(}yprime\PY{p}{)} \PY{c+c1}{\PYZsh{}\PYZsh{}MSE}
         \PY{p}{\PYZcb{}}
         lmMSEtrain.multiple1\PY{o}{\PYZlt{}\PYZhy{}}\PY{k+kp}{mean}\PY{p}{(}\PY{k+kp}{sapply}\PY{p}{(}\PY{l+m}{1}\PY{o}{:}\PY{l+m}{5}\PY{p}{,}run\PYZus{}lm\PYZus{}fold\PY{p}{,}nombre\PY{p}{,}\PY{l+s}{\PYZdq{}}\PY{l+s}{train\PYZdq{}}\PY{p}{)}\PY{p}{)}
         lmMSEtest.multiple1\PY{o}{\PYZlt{}\PYZhy{}}\PY{k+kp}{mean}\PY{p}{(}\PY{k+kp}{sapply}\PY{p}{(}\PY{l+m}{1}\PY{o}{:}\PY{l+m}{5}\PY{p}{,}run\PYZus{}lm\PYZus{}fold\PY{p}{,}nombre\PY{p}{,}\PY{l+s}{\PYZdq{}}\PY{l+s}{test\PYZdq{}}\PY{p}{)}\PY{p}{)}
         \PY{k+kp}{cat}\PY{p}{(}\PY{l+s}{\PYZdq{}}\PY{l+s}{train: \PYZdq{}}\PY{p}{,}lmMSEtrain.multiple1\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}n\PYZdq{}}\PY{p}{)}
         \PY{k+kp}{cat}\PY{p}{(}\PY{l+s}{\PYZdq{}}\PY{l+s}{test: \PYZdq{}}\PY{p}{,}lmMSEtest.multiple1\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}n\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
train:  0.05551181 
test:  0.05881755 

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}30}]:} nombre \PY{o}{\PYZlt{}\PYZhy{}} \PY{l+s}{\PYZdq{}}\PY{l+s}{treasury//treasury\PYZdq{}}
         run\PYZus{}lm\PYZus{}fold \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kr}{function}\PY{p}{(}i\PY{p}{,} x\PY{p}{,} tt \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{test\PYZdq{}}\PY{p}{)} \PY{p}{\PYZob{}}
             file \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{paste}\PY{p}{(}x\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZhy{}5\PYZhy{}\PYZdq{}}\PY{p}{,} i\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{tra.dat\PYZdq{}}\PY{p}{,} sep\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdq{}}\PY{p}{)}
             x\PYZus{}tra \PY{o}{\PYZlt{}\PYZhy{}} read.csv\PY{p}{(}\PY{k+kp}{file}\PY{p}{,} comment.char\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{@\PYZdq{}}\PY{p}{,} header\PY{o}{=}\PY{k+kc}{FALSE}\PY{p}{)}
             file \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{paste}\PY{p}{(}x\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZhy{}5\PYZhy{}\PYZdq{}}\PY{p}{,} i\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{tst.dat\PYZdq{}}\PY{p}{,} sep\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdq{}}\PY{p}{)}
             x\PYZus{}tst \PY{o}{\PYZlt{}\PYZhy{}} read.csv\PY{p}{(}\PY{k+kp}{file}\PY{p}{,} comment.char\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{@\PYZdq{}}\PY{p}{,} header\PY{o}{=}\PY{k+kc}{FALSE}\PY{p}{)}
             In \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{length}\PY{p}{(}\PY{k+kp}{names}\PY{p}{(}x\PYZus{}tra\PY{p}{)}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{l+m}{1}
             \PY{k+kp}{names}\PY{p}{(}x\PYZus{}tra\PY{p}{)}\PY{p}{[}\PY{l+m}{1}\PY{o}{:}In\PY{p}{]} \PY{o}{\PYZlt{}\PYZhy{}} paste \PY{p}{(}\PY{l+s}{\PYZdq{}}\PY{l+s}{X\PYZdq{}}\PY{p}{,} \PY{l+m}{1}\PY{o}{:}In\PY{p}{,} sep\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdq{}}\PY{p}{)}
             \PY{k+kp}{names}\PY{p}{(}x\PYZus{}tra\PY{p}{)}\PY{p}{[}In\PY{l+m}{+1}\PY{p}{]} \PY{o}{\PYZlt{}\PYZhy{}} \PY{l+s}{\PYZdq{}}\PY{l+s}{Y\PYZdq{}}
             \PY{k+kp}{names}\PY{p}{(}x\PYZus{}tst\PY{p}{)}\PY{p}{[}\PY{l+m}{1}\PY{o}{:}In\PY{p}{]} \PY{o}{\PYZlt{}\PYZhy{}} paste \PY{p}{(}\PY{l+s}{\PYZdq{}}\PY{l+s}{X\PYZdq{}}\PY{p}{,} \PY{l+m}{1}\PY{o}{:}In\PY{p}{,} sep\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdq{}}\PY{p}{)}
             \PY{k+kp}{names}\PY{p}{(}x\PYZus{}tst\PY{p}{)}\PY{p}{[}In\PY{l+m}{+1}\PY{p}{]} \PY{o}{\PYZlt{}\PYZhy{}} \PY{l+s}{\PYZdq{}}\PY{l+s}{Y\PYZdq{}}
             \PY{k+kr}{if} \PY{p}{(}tt \PY{o}{==} \PY{l+s}{\PYZdq{}}\PY{l+s}{train\PYZdq{}}\PY{p}{)} \PY{p}{\PYZob{}}
                 test \PY{o}{\PYZlt{}\PYZhy{}} x\PYZus{}tra
             \PY{p}{\PYZcb{}}
             \PY{k+kr}{else} \PY{p}{\PYZob{}}
                 test \PY{o}{\PYZlt{}\PYZhy{}} x\PYZus{}tst
             \PY{p}{\PYZcb{}}
             fitMulti\PY{o}{=}lm\PY{p}{(}Y\PY{o}{\PYZti{}}X1\PY{o}{+}X2\PY{o}{+}X5\PY{o}{+}X8\PY{o}{+}X11\PY{o}{+}X15\PY{p}{,}x\PYZus{}tra\PY{p}{)}
             yprime\PY{o}{=}predict\PY{p}{(}fitMulti\PY{p}{,}test\PY{p}{)}
             \PY{k+kp}{sum}\PY{p}{(}\PY{k+kp}{abs}\PY{p}{(}test\PY{o}{\PYZdl{}}Y\PY{o}{\PYZhy{}}yprime\PY{p}{)}\PY{o}{\PYZca{}}\PY{l+m}{2}\PY{p}{)}\PY{o}{/}\PY{k+kp}{length}\PY{p}{(}yprime\PY{p}{)} \PY{c+c1}{\PYZsh{}\PYZsh{}MSE}
         \PY{p}{\PYZcb{}}
         lmMSEtrain.multiple2\PY{o}{\PYZlt{}\PYZhy{}}\PY{k+kp}{mean}\PY{p}{(}\PY{k+kp}{sapply}\PY{p}{(}\PY{l+m}{1}\PY{o}{:}\PY{l+m}{5}\PY{p}{,}run\PYZus{}lm\PYZus{}fold\PY{p}{,}nombre\PY{p}{,}\PY{l+s}{\PYZdq{}}\PY{l+s}{train\PYZdq{}}\PY{p}{)}\PY{p}{)}
         lmMSEtest.multiple2\PY{o}{\PYZlt{}\PYZhy{}}\PY{k+kp}{mean}\PY{p}{(}\PY{k+kp}{sapply}\PY{p}{(}\PY{l+m}{1}\PY{o}{:}\PY{l+m}{5}\PY{p}{,}run\PYZus{}lm\PYZus{}fold\PY{p}{,}nombre\PY{p}{,}\PY{l+s}{\PYZdq{}}\PY{l+s}{test\PYZdq{}}\PY{p}{)}\PY{p}{)}
         \PY{k+kp}{cat}\PY{p}{(}\PY{l+s}{\PYZdq{}}\PY{l+s}{train: \PYZdq{}}\PY{p}{,}lmMSEtrain.multiple2\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}n\PYZdq{}}\PY{p}{)}
         \PY{k+kp}{cat}\PY{p}{(}\PY{l+s}{\PYZdq{}}\PY{l+s}{test: \PYZdq{}}\PY{p}{,}lmMSEtest.multiple2\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZbs{}n\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
train:  0.05938035 
test:  0.06181592 

    \end{Verbatim}

    Como se puede ver, el modelo \emph{fit.multiple2}
(lmMSE\_\textbf{.multiple1) obtiene mejores resultados que el modelo
\emph{fit.multiple3} (lmMSE}\_.multiple2); por ello, nos quedaremos con
el modelo \emph{fit.multiple2} para comparar.

Lo siguiente que vamos a hacer es, con las variables de nuestro mejor
modelo, crearemos modelos con el algoritmo KNN.

    \hypertarget{modelos-con-el-algoritmo-knn}{%
\subsubsection{Modelos con el algoritmo
KNN}\label{modelos-con-el-algoritmo-knn}}

En este apartado se van a probar diferentes modelos con el algoritmo
KNN, después se elegirá el mejor y se realizará validación cruzada con
este. Los modelos que se probarán será uno con todas las variables, uno
con las variables elegidas del mejor modelo lineal múltiple; tras esto
se probarán diferentes tamaños de k para ver si mejoran los resultados.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}31}]:} \PY{c+c1}{\PYZsh{} cargamos la librería para utilizar knn}
         \PY{k+kn}{library}\PY{p}{(}kknn\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}32}]:} \PY{c+c1}{\PYZsh{} Creamos un modelo y calculamos su RMSE}
         fitknn1 \PY{o}{=} kknn\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}\PY{l+m}{.}\PY{p}{,} treasury\PY{p}{,} treasury\PY{p}{)}
         yprime \PY{o}{=} fitknn1\PY{o}{\PYZdl{}}fitted.values
         \PY{k+kp}{print}\PY{p}{(}\PY{k+kp}{sqrt}\PY{p}{(}\PY{k+kp}{sum}\PY{p}{(}\PY{p}{(}treasury\PY{o}{\PYZdl{}}MonthCDRate\PY{o}{\PYZhy{}}yprime\PY{p}{)}\PY{o}{\PYZca{}}\PY{l+m}{2}\PY{p}{)}\PY{o}{/}\PY{k+kp}{length}\PY{p}{(}yprime\PY{p}{)}\PY{p}{)}\PY{p}{)} \PY{c+c1}{\PYZsh{}RMSE}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
[1] 0.1144729

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}33}]:} \PY{c+c1}{\PYZsh{} Creamos un modelo y calculamos su RMSE}
         fitknn2 \PY{o}{=} kknn\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMaturityRate\PYZus{}1Y\PY{o}{+}CMortgageRate\PYZus{}30Y\PY{o}{+}CMaturityRate\PYZus{}3Y\PY{o}{+}
                            bankCredit\PY{o}{+}currency\PY{o}{+}demandDeposits\PY{o}{+}moneyStock\PY{o}{+}
                            checkableDeposits\PY{o}{+}loansLeases\PY{o}{+}savingsDeposits\PY{o}{+}
                            tradeCurrencies\PY{p}{,} treasury\PY{p}{,} treasury\PY{p}{)}
         yprime \PY{o}{=} fitknn2\PY{o}{\PYZdl{}}fitted.values
         \PY{k+kp}{print}\PY{p}{(}\PY{k+kp}{sqrt}\PY{p}{(}\PY{k+kp}{sum}\PY{p}{(}\PY{p}{(}treasury\PY{o}{\PYZdl{}}MonthCDRate\PY{o}{\PYZhy{}}yprime\PY{p}{)}\PY{o}{\PYZca{}}\PY{l+m}{2}\PY{p}{)}\PY{o}{/}\PY{k+kp}{length}\PY{p}{(}yprime\PY{p}{)}\PY{p}{)}\PY{p}{)} \PY{c+c1}{\PYZsh{}RMSE}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
[1] 0.118278

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}34}]:} \PY{c+c1}{\PYZsh{} Creamos un modelo y calculamos su RMSE}
         fitknn3 \PY{o}{=} kknn\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMaturityRate\PYZus{}1Y\PY{o}{+}CMortgageRate\PYZus{}30Y\PY{o}{+}CMaturityRate\PYZus{}3Y\PY{o}{+}
                            bankCredit\PY{o}{+}currency\PY{o}{+}demandDeposits\PY{o}{+}moneyStock\PY{o}{+}
                            checkableDeposits\PY{o}{+}loansLeases\PY{o}{+}savingsDeposits\PY{o}{+}
                            tradeCurrencies\PY{p}{,} treasury\PY{p}{,} treasury\PY{p}{,}k\PY{o}{=}\PY{l+m}{5}\PY{p}{)}
         yprime \PY{o}{=} fitknn3\PY{o}{\PYZdl{}}fitted.values
         \PY{k+kp}{print}\PY{p}{(}\PY{k+kp}{sqrt}\PY{p}{(}\PY{k+kp}{sum}\PY{p}{(}\PY{p}{(}treasury\PY{o}{\PYZdl{}}MonthCDRate\PY{o}{\PYZhy{}}yprime\PY{p}{)}\PY{o}{\PYZca{}}\PY{l+m}{2}\PY{p}{)}\PY{o}{/}\PY{k+kp}{length}\PY{p}{(}yprime\PY{p}{)}\PY{p}{)}\PY{p}{)} \PY{c+c1}{\PYZsh{}RMSE}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
[1] 0.09717242

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}35}]:} \PY{c+c1}{\PYZsh{} Creamos un modelo y calculamos su RMSE}
         fitknn4 \PY{o}{=} kknn\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}\PY{l+m}{.}\PY{p}{,} treasury\PY{p}{,} treasury\PY{p}{,}k\PY{o}{=}\PY{l+m}{5}\PY{p}{)}
         yprime \PY{o}{=} fitknn4\PY{o}{\PYZdl{}}fitted.values
         \PY{k+kp}{print}\PY{p}{(}\PY{k+kp}{sqrt}\PY{p}{(}\PY{k+kp}{sum}\PY{p}{(}\PY{p}{(}treasury\PY{o}{\PYZdl{}}MonthCDRate\PY{o}{\PYZhy{}}yprime\PY{p}{)}\PY{o}{\PYZca{}}\PY{l+m}{2}\PY{p}{)}\PY{o}{/}\PY{k+kp}{length}\PY{p}{(}yprime\PY{p}{)}\PY{p}{)}\PY{p}{)} \PY{c+c1}{\PYZsh{}RMSE}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
[1] 0.09282986

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}36}]:} \PY{c+c1}{\PYZsh{} Creamos un modelo y calculamos su RMSE}
         fitknn5 \PY{o}{=} kknn\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMaturityRate\PYZus{}1Y\PY{o}{+}CMortgageRate\PYZus{}30Y\PY{o}{+}CMaturityRate\PYZus{}3Y\PY{o}{+}
                            bankCredit\PY{o}{+}currency\PY{o}{+}demandDeposits\PY{o}{+}moneyStock\PY{o}{+}
                            checkableDeposits\PY{o}{+}loansLeases\PY{o}{+}savingsDeposits\PY{o}{+}
                            tradeCurrencies\PY{p}{,} treasury\PY{p}{,} treasury\PY{p}{,}k\PY{o}{=}\PY{l+m}{7}\PY{p}{)}
         yprime \PY{o}{=} fitknn5\PY{o}{\PYZdl{}}fitted.values
         \PY{k+kp}{print}\PY{p}{(}\PY{k+kp}{sqrt}\PY{p}{(}\PY{k+kp}{sum}\PY{p}{(}\PY{p}{(}treasury\PY{o}{\PYZdl{}}MonthCDRate\PY{o}{\PYZhy{}}yprime\PY{p}{)}\PY{o}{\PYZca{}}\PY{l+m}{2}\PY{p}{)}\PY{o}{/}\PY{k+kp}{length}\PY{p}{(}yprime\PY{p}{)}\PY{p}{)}\PY{p}{)} \PY{c+c1}{\PYZsh{}RMSE}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
[1] 0.118278

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}37}]:} \PY{c+c1}{\PYZsh{} Creamos un modelo y calculamos su RMSE}
         fitknn6 \PY{o}{=} kknn\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}\PY{l+m}{.}\PY{p}{,} treasury\PY{p}{,} treasury\PY{p}{,}k\PY{o}{=}\PY{l+m}{7}\PY{p}{)}
         yprime \PY{o}{=} fitknn6\PY{o}{\PYZdl{}}fitted.values
         \PY{k+kp}{print}\PY{p}{(}\PY{k+kp}{sqrt}\PY{p}{(}\PY{k+kp}{sum}\PY{p}{(}\PY{p}{(}treasury\PY{o}{\PYZdl{}}MonthCDRate\PY{o}{\PYZhy{}}yprime\PY{p}{)}\PY{o}{\PYZca{}}\PY{l+m}{2}\PY{p}{)}\PY{o}{/}\PY{k+kp}{length}\PY{p}{(}yprime\PY{p}{)}\PY{p}{)}\PY{p}{)} \PY{c+c1}{\PYZsh{}RMSE}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
[1] 0.1144729

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}38}]:} \PY{c+c1}{\PYZsh{} Creamos un modelo y calculamos su RMSE}
         fitknn7 \PY{o}{=} kknn\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}CMaturityRate\PYZus{}1Y\PY{o}{+}CMortgageRate\PYZus{}30Y\PY{o}{+}CMaturityRate\PYZus{}3Y\PY{o}{+}
                            bankCredit\PY{o}{+}currency\PY{o}{+}demandDeposits\PY{o}{+}moneyStock\PY{o}{+}
                            checkableDeposits\PY{o}{+}loansLeases\PY{o}{+}savingsDeposits\PY{o}{+}
                            tradeCurrencies\PY{p}{,} treasury\PY{p}{,} treasury\PY{p}{,}k\PY{o}{=}\PY{l+m}{9}\PY{p}{)}
         yprime \PY{o}{=} fitknn7\PY{o}{\PYZdl{}}fitted.values
         \PY{k+kp}{print}\PY{p}{(}\PY{k+kp}{sqrt}\PY{p}{(}\PY{k+kp}{sum}\PY{p}{(}\PY{p}{(}treasury\PY{o}{\PYZdl{}}MonthCDRate\PY{o}{\PYZhy{}}yprime\PY{p}{)}\PY{o}{\PYZca{}}\PY{l+m}{2}\PY{p}{)}\PY{o}{/}\PY{k+kp}{length}\PY{p}{(}yprime\PY{p}{)}\PY{p}{)}\PY{p}{)} \PY{c+c1}{\PYZsh{}RMSE}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
[1] 0.1359792

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}39}]:} \PY{c+c1}{\PYZsh{} Creamos un modelo y calculamos su RMSE}
         fitknn8 \PY{o}{=} kknn\PY{p}{(}MonthCDRate\PY{o}{\PYZti{}}\PY{l+m}{.}\PY{p}{,} treasury\PY{p}{,} treasury\PY{p}{,}k\PY{o}{=}\PY{l+m}{9}\PY{p}{)}
         yprime \PY{o}{=} fitknn8\PY{o}{\PYZdl{}}fitted.values
         \PY{k+kp}{print}\PY{p}{(}\PY{k+kp}{sqrt}\PY{p}{(}\PY{k+kp}{sum}\PY{p}{(}\PY{p}{(}treasury\PY{o}{\PYZdl{}}MonthCDRate\PY{o}{\PYZhy{}}yprime\PY{p}{)}\PY{o}{\PYZca{}}\PY{l+m}{2}\PY{p}{)}\PY{o}{/}\PY{k+kp}{length}\PY{p}{(}yprime\PY{p}{)}\PY{p}{)}\PY{p}{)} \PY{c+c1}{\PYZsh{}RMSE}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
[1] 0.1324192

    \end{Verbatim}

    Como se puede ver en los resultados anteriores, ambos modelos (con todas
las variables, o solo con las variables seleccionadas del mejor modelo
de regresión lineal múltiple) obtienen resultados muy parecidos. Además,
con las pruebas hechas con diferentes tamaños de \emph{k}, podemos ver
que los modelos que mejores puntuaciones obtienen son aquellos con el
valor de \emph{k} igual a 5. Por ello, realizaremos validación cruzada a
los dos modelos de que tiene \emph{k} igual a 5 y veremos que resultados
obtienen. Si el resultado no cambiara demasiado, nos quedaríamos con el
modelo más simple.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}40}]:} nombre \PY{o}{\PYZlt{}\PYZhy{}} \PY{l+s}{\PYZdq{}}\PY{l+s}{treasury//treasury\PYZdq{}}
         run\PYZus{}knn\PYZus{}fold \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kr}{function}\PY{p}{(}i\PY{p}{,} x\PY{p}{,} tt \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{test\PYZdq{}}\PY{p}{)} \PY{p}{\PYZob{}}
             file \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{paste}\PY{p}{(}x\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZhy{}5\PYZhy{}\PYZdq{}}\PY{p}{,} i\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{tra.dat\PYZdq{}}\PY{p}{,} sep\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdq{}}\PY{p}{)}
             x\PYZus{}tra \PY{o}{\PYZlt{}\PYZhy{}} read.csv\PY{p}{(}\PY{k+kp}{file}\PY{p}{,} comment.char\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{@\PYZdq{}}\PY{p}{,} header\PY{o}{=}\PY{k+kc}{FALSE}\PY{p}{)}
             file \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{paste}\PY{p}{(}x\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZhy{}5\PYZhy{}\PYZdq{}}\PY{p}{,} i\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{tst.dat\PYZdq{}}\PY{p}{,} sep\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdq{}}\PY{p}{)}
             x\PYZus{}tst \PY{o}{\PYZlt{}\PYZhy{}} read.csv\PY{p}{(}\PY{k+kp}{file}\PY{p}{,} comment.char\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{@\PYZdq{}}\PY{p}{,} header\PY{o}{=}\PY{k+kc}{FALSE}\PY{p}{)}
             In \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{length}\PY{p}{(}\PY{k+kp}{names}\PY{p}{(}x\PYZus{}tra\PY{p}{)}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{l+m}{1}
             \PY{k+kp}{names}\PY{p}{(}x\PYZus{}tra\PY{p}{)}\PY{p}{[}\PY{l+m}{1}\PY{o}{:}In\PY{p}{]} \PY{o}{\PYZlt{}\PYZhy{}} paste \PY{p}{(}\PY{l+s}{\PYZdq{}}\PY{l+s}{X\PYZdq{}}\PY{p}{,} \PY{l+m}{1}\PY{o}{:}In\PY{p}{,} sep\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdq{}}\PY{p}{)}
             \PY{k+kp}{names}\PY{p}{(}x\PYZus{}tra\PY{p}{)}\PY{p}{[}In\PY{l+m}{+1}\PY{p}{]} \PY{o}{\PYZlt{}\PYZhy{}} \PY{l+s}{\PYZdq{}}\PY{l+s}{Y\PYZdq{}}
             \PY{k+kp}{names}\PY{p}{(}x\PYZus{}tst\PY{p}{)}\PY{p}{[}\PY{l+m}{1}\PY{o}{:}In\PY{p}{]} \PY{o}{\PYZlt{}\PYZhy{}} paste \PY{p}{(}\PY{l+s}{\PYZdq{}}\PY{l+s}{X\PYZdq{}}\PY{p}{,} \PY{l+m}{1}\PY{o}{:}In\PY{p}{,} sep\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdq{}}\PY{p}{)}
             \PY{k+kp}{names}\PY{p}{(}x\PYZus{}tst\PY{p}{)}\PY{p}{[}In\PY{l+m}{+1}\PY{p}{]} \PY{o}{\PYZlt{}\PYZhy{}} \PY{l+s}{\PYZdq{}}\PY{l+s}{Y\PYZdq{}}
             \PY{k+kr}{if} \PY{p}{(}tt \PY{o}{==} \PY{l+s}{\PYZdq{}}\PY{l+s}{train\PYZdq{}}\PY{p}{)} \PY{p}{\PYZob{}}
                 test \PY{o}{\PYZlt{}\PYZhy{}} x\PYZus{}tra
             \PY{p}{\PYZcb{}}
             \PY{k+kr}{else} \PY{p}{\PYZob{}}
                 test \PY{o}{\PYZlt{}\PYZhy{}} x\PYZus{}tst
             \PY{p}{\PYZcb{}}
             fitMulti\PY{o}{=}kknn\PY{p}{(}Y\PY{o}{\PYZti{}}\PY{l+m}{.}\PY{p}{,}x\PYZus{}tra\PY{p}{,}test\PY{p}{,}k\PY{o}{=}\PY{l+m}{5}\PY{p}{)}
             \PY{c+c1}{\PYZsh{} Transformamos los datos a su forma normal ya que la predicción está hecha sobre log(Y) y no sobre Y}
             yprime\PY{o}{=}fitMulti\PY{o}{\PYZdl{}}fitted.values
             \PY{k+kp}{sum}\PY{p}{(}\PY{k+kp}{abs}\PY{p}{(}test\PY{o}{\PYZdl{}}Y\PY{o}{\PYZhy{}}yprime\PY{p}{)}\PY{o}{\PYZca{}}\PY{l+m}{2}\PY{p}{)}\PY{o}{/}\PY{k+kp}{length}\PY{p}{(}yprime\PY{p}{)} \PY{c+c1}{\PYZsh{}\PYZsh{}MSE}
         \PY{p}{\PYZcb{}}
         knnMSEtrain.all\PY{o}{\PYZlt{}\PYZhy{}}\PY{k+kp}{mean}\PY{p}{(}\PY{k+kp}{sapply}\PY{p}{(}\PY{l+m}{1}\PY{o}{:}\PY{l+m}{5}\PY{p}{,}run\PYZus{}knn\PYZus{}fold\PY{p}{,}nombre\PY{p}{,}\PY{l+s}{\PYZdq{}}\PY{l+s}{train\PYZdq{}}\PY{p}{)}\PY{p}{)}
         knnMSEtest.all\PY{o}{\PYZlt{}\PYZhy{}}\PY{k+kp}{mean}\PY{p}{(}\PY{k+kp}{sapply}\PY{p}{(}\PY{l+m}{1}\PY{o}{:}\PY{l+m}{5}\PY{p}{,}run\PYZus{}knn\PYZus{}fold\PY{p}{,}nombre\PY{p}{,}\PY{l+s}{\PYZdq{}}\PY{l+s}{test\PYZdq{}}\PY{p}{)}\PY{p}{)}
         \PY{k+kp}{print}\PY{p}{(}knnMSEtrain.all\PY{p}{)}
         \PY{k+kp}{print}\PY{p}{(}knnMSEtest.all\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
[1] 0.0106916
[1] 0.04609969

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}41}]:} nombre \PY{o}{\PYZlt{}\PYZhy{}} \PY{l+s}{\PYZdq{}}\PY{l+s}{treasury//treasury\PYZdq{}}
         run\PYZus{}knn\PYZus{}fold \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kr}{function}\PY{p}{(}i\PY{p}{,} x\PY{p}{,} tt \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{test\PYZdq{}}\PY{p}{)} \PY{p}{\PYZob{}}
             file \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{paste}\PY{p}{(}x\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZhy{}5\PYZhy{}\PYZdq{}}\PY{p}{,} i\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{tra.dat\PYZdq{}}\PY{p}{,} sep\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdq{}}\PY{p}{)}
             x\PYZus{}tra \PY{o}{\PYZlt{}\PYZhy{}} read.csv\PY{p}{(}\PY{k+kp}{file}\PY{p}{,} comment.char\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{@\PYZdq{}}\PY{p}{,} header\PY{o}{=}\PY{k+kc}{FALSE}\PY{p}{)}
             file \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{paste}\PY{p}{(}x\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZhy{}5\PYZhy{}\PYZdq{}}\PY{p}{,} i\PY{p}{,} \PY{l+s}{\PYZdq{}}\PY{l+s}{tst.dat\PYZdq{}}\PY{p}{,} sep\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdq{}}\PY{p}{)}
             x\PYZus{}tst \PY{o}{\PYZlt{}\PYZhy{}} read.csv\PY{p}{(}\PY{k+kp}{file}\PY{p}{,} comment.char\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{@\PYZdq{}}\PY{p}{,} header\PY{o}{=}\PY{k+kc}{FALSE}\PY{p}{)}
             In \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{length}\PY{p}{(}\PY{k+kp}{names}\PY{p}{(}x\PYZus{}tra\PY{p}{)}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{l+m}{1}
             \PY{k+kp}{names}\PY{p}{(}x\PYZus{}tra\PY{p}{)}\PY{p}{[}\PY{l+m}{1}\PY{o}{:}In\PY{p}{]} \PY{o}{\PYZlt{}\PYZhy{}} paste \PY{p}{(}\PY{l+s}{\PYZdq{}}\PY{l+s}{X\PYZdq{}}\PY{p}{,} \PY{l+m}{1}\PY{o}{:}In\PY{p}{,} sep\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdq{}}\PY{p}{)}
             \PY{k+kp}{names}\PY{p}{(}x\PYZus{}tra\PY{p}{)}\PY{p}{[}In\PY{l+m}{+1}\PY{p}{]} \PY{o}{\PYZlt{}\PYZhy{}} \PY{l+s}{\PYZdq{}}\PY{l+s}{Y\PYZdq{}}
             \PY{k+kp}{names}\PY{p}{(}x\PYZus{}tst\PY{p}{)}\PY{p}{[}\PY{l+m}{1}\PY{o}{:}In\PY{p}{]} \PY{o}{\PYZlt{}\PYZhy{}} paste \PY{p}{(}\PY{l+s}{\PYZdq{}}\PY{l+s}{X\PYZdq{}}\PY{p}{,} \PY{l+m}{1}\PY{o}{:}In\PY{p}{,} sep\PY{o}{=}\PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZdq{}}\PY{p}{)}
             \PY{k+kp}{names}\PY{p}{(}x\PYZus{}tst\PY{p}{)}\PY{p}{[}In\PY{l+m}{+1}\PY{p}{]} \PY{o}{\PYZlt{}\PYZhy{}} \PY{l+s}{\PYZdq{}}\PY{l+s}{Y\PYZdq{}}
             \PY{k+kr}{if} \PY{p}{(}tt \PY{o}{==} \PY{l+s}{\PYZdq{}}\PY{l+s}{train\PYZdq{}}\PY{p}{)} \PY{p}{\PYZob{}}
                 test \PY{o}{\PYZlt{}\PYZhy{}} x\PYZus{}tra
             \PY{p}{\PYZcb{}}
             \PY{k+kr}{else} \PY{p}{\PYZob{}}
                 test \PY{o}{\PYZlt{}\PYZhy{}} x\PYZus{}tst
             \PY{p}{\PYZcb{}}
             fitMulti\PY{o}{=}kknn\PY{p}{(}Y\PY{o}{\PYZti{}}X1\PY{o}{+}X2\PY{o}{+}X5\PY{o}{+}X7\PY{o}{+}X8\PY{o}{+}X9\PY{o}{+}X11\PY{o}{+}X12\PY{o}{+}X13\PY{o}{+}X14\PY{o}{+}X15 \PY{p}{,}x\PYZus{}tra\PY{p}{,}test\PY{p}{,}k\PY{o}{=}\PY{l+m}{5}\PY{p}{)}
             \PY{c+c1}{\PYZsh{} Transformamos los datos a su forma normal ya que la predicción está hecha sobre log(Y) y no sobre Y}
             yprime\PY{o}{=}fitMulti\PY{o}{\PYZdl{}}fitted.values
             \PY{k+kp}{sum}\PY{p}{(}\PY{k+kp}{abs}\PY{p}{(}test\PY{o}{\PYZdl{}}Y\PY{o}{\PYZhy{}}yprime\PY{p}{)}\PY{o}{\PYZca{}}\PY{l+m}{2}\PY{p}{)}\PY{o}{/}\PY{k+kp}{length}\PY{p}{(}yprime\PY{p}{)} \PY{c+c1}{\PYZsh{}\PYZsh{}MSE}
         \PY{p}{\PYZcb{}}
         knnMSEtrain.simple\PY{o}{\PYZlt{}\PYZhy{}}\PY{k+kp}{mean}\PY{p}{(}\PY{k+kp}{sapply}\PY{p}{(}\PY{l+m}{1}\PY{o}{:}\PY{l+m}{5}\PY{p}{,}run\PYZus{}knn\PYZus{}fold\PY{p}{,}nombre\PY{p}{,}\PY{l+s}{\PYZdq{}}\PY{l+s}{train\PYZdq{}}\PY{p}{)}\PY{p}{)}
         knnMSEtest.simple\PY{o}{\PYZlt{}\PYZhy{}}\PY{k+kp}{mean}\PY{p}{(}\PY{k+kp}{sapply}\PY{p}{(}\PY{l+m}{1}\PY{o}{:}\PY{l+m}{5}\PY{p}{,}run\PYZus{}knn\PYZus{}fold\PY{p}{,}nombre\PY{p}{,}\PY{l+s}{\PYZdq{}}\PY{l+s}{test\PYZdq{}}\PY{p}{)}\PY{p}{)}
         \PY{k+kp}{print}\PY{p}{(}knnMSEtrain.simple\PY{p}{)}
         \PY{k+kp}{print}\PY{p}{(}knnMSEtest.simple\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
[1] 0.01136343
[1] 0.04357275

    \end{Verbatim}

    Tras los resultados obtenidos en la validación cruzada, nos quedaremos
con el modelo más simple ya que obtiene mejores resultados en test que
el modelo que utiliza todas las variables. Además, podemos apreciar que
ambos modelo tienen sobreaprendizaje debido a la diferencia entre train
y test.

    \hypertarget{comparaciuxf3n-de-modelos}{%
\subsection{Comparación de modelos}\label{comparaciuxf3n-de-modelos}}

En este apartado compararemos los algoritmos de regresión múltiple
obtenidos en el apartado anterior y descubriremos cual de los dos es
mejor. Para ello, utilizaremos el test de Wilcoxon.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}42}]:} \PY{c+c1}{\PYZsh{} Primero guardamos los resultados del la validación cruzada en un tabla.}
         tablatst \PY{o}{=} \PY{k+kp}{cbind}\PY{p}{(}lmMSEtest.multiple1\PY{p}{,}lmMSEtest.multiple2\PY{p}{)}
         \PY{c+c1}{\PYZsh{} Normalizamos los datos ya que es regresión.}
         difs \PY{o}{\PYZlt{}\PYZhy{}} \PY{p}{(}tablatst\PY{p}{[}\PY{p}{,}\PY{l+m}{1}\PY{p}{]} \PY{o}{\PYZhy{}} tablatst\PY{p}{[}\PY{p}{,}\PY{l+m}{2}\PY{p}{]}\PY{p}{)} \PY{o}{/} tablatst\PY{p}{[}\PY{p}{,}\PY{l+m}{1}\PY{p}{]}
         wilc\PYZus{}1\PYZus{}2 \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{cbind}\PY{p}{(}ifelse \PY{p}{(}difs\PY{o}{\PYZlt{}}\PY{l+m}{0}\PY{p}{,} \PY{k+kp}{abs}\PY{p}{(}difs\PY{p}{)}\PY{l+m}{+0.1}\PY{p}{,} \PY{l+m}{0}\PY{l+m}{+0.1}\PY{p}{)}\PY{p}{,} ifelse \PY{p}{(}difs\PY{o}{\PYZgt{}}\PY{l+m}{0}\PY{p}{,} \PY{k+kp}{abs}\PY{p}{(}difs\PY{p}{)}\PY{l+m}{+0.1}\PY{p}{,} \PY{l+m}{0}\PY{l+m}{+0.1}\PY{p}{)}\PY{p}{)}
         \PY{k+kp}{colnames}\PY{p}{(}wilc\PYZus{}1\PYZus{}2\PY{p}{)} \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kt}{c}\PY{p}{(}\PY{k+kp}{colnames}\PY{p}{(}tablatst\PY{p}{)}\PY{p}{[}\PY{l+m}{1}\PY{p}{]}\PY{p}{,} \PY{k+kp}{colnames}\PY{p}{(}tablatst\PY{p}{)}\PY{p}{[}\PY{l+m}{2}\PY{p}{]}\PY{p}{)}
         wilc\PYZus{}1\PYZus{}2
\end{Verbatim}


    \begin{tabular}{r|ll}
  & lmMSEtest.multiple1 & lmMSEtest.multiple2\\
\hline
	lmMSEtest.multiple1 & 0.1509776 & 0.1      \\
\end{tabular}


    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}43}]:} \PY{c+c1}{\PYZsh{} Realizamos el test de wilcoxon y analizamos los resultados.}
         LMvstst \PY{o}{\PYZlt{}\PYZhy{}} wilcox.test\PY{p}{(}wilc\PYZus{}1\PYZus{}2\PY{p}{[}\PY{p}{,}\PY{l+m}{1}\PY{p}{]}\PY{p}{,} wilc\PYZus{}1\PYZus{}2\PY{p}{[}\PY{p}{,}\PY{l+m}{2}\PY{p}{]}\PY{p}{,} alternative \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{two.sided\PYZdq{}}\PY{p}{,} paired\PY{o}{=}\PY{k+kc}{TRUE}\PY{p}{)}
         Rmas \PY{o}{\PYZlt{}\PYZhy{}} LMvstst\PY{o}{\PYZdl{}}statistic
         pvalue \PY{o}{\PYZlt{}\PYZhy{}} LMvstst\PY{o}{\PYZdl{}}p.value
         LMvstst \PY{o}{\PYZlt{}\PYZhy{}} wilcox.test\PY{p}{(}wilc\PYZus{}1\PYZus{}2\PY{p}{[}\PY{p}{,}\PY{l+m}{2}\PY{p}{]}\PY{p}{,} wilc\PYZus{}1\PYZus{}2\PY{p}{[}\PY{p}{,}\PY{l+m}{1}\PY{p}{]}\PY{p}{,} alternative \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{two.sided\PYZdq{}}\PY{p}{,} paired\PY{o}{=}\PY{k+kc}{TRUE}\PY{p}{)}
         Rmenos \PY{o}{\PYZlt{}\PYZhy{}} LMvstst\PY{o}{\PYZdl{}}statistic
         Rmas
         Rmenos
         pvalue
\end{Verbatim}


    \textbf{V:} 1

    
    \textbf{V:} 0

    
    1

    
    Como podemos ver, no hay diferencias significativas entre los dos
modelos, por ello, no podemos decir que uno de los modelos sea mejor que
el otro. Por ello, compararemos también el modelo de regresión múltiple
que hemos elegido antes y lo compararemos con el modelo obtenido por el
algoritmo de knn y veremos si hay diferencias significativas.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}44}]:} \PY{c+c1}{\PYZsh{} Primero guardamos los resultados del la validación cruzada en un tabla.}
         tablatst \PY{o}{=} \PY{k+kp}{cbind}\PY{p}{(}knnMSEtest.simple\PY{p}{,}lmMSEtest.multiple1\PY{p}{)}
         \PY{c+c1}{\PYZsh{} Normalizamos los datos ya que es regresión.}
         difs \PY{o}{\PYZlt{}\PYZhy{}} \PY{p}{(}tablatst\PY{p}{[}\PY{p}{,}\PY{l+m}{1}\PY{p}{]} \PY{o}{\PYZhy{}} tablatst\PY{p}{[}\PY{p}{,}\PY{l+m}{2}\PY{p}{]}\PY{p}{)} \PY{o}{/} tablatst\PY{p}{[}\PY{p}{,}\PY{l+m}{1}\PY{p}{]}
         wilc\PYZus{}1\PYZus{}2 \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kp}{cbind}\PY{p}{(}ifelse \PY{p}{(}difs\PY{o}{\PYZlt{}}\PY{l+m}{0}\PY{p}{,} \PY{k+kp}{abs}\PY{p}{(}difs\PY{p}{)}\PY{l+m}{+0.1}\PY{p}{,} \PY{l+m}{0}\PY{l+m}{+0.1}\PY{p}{)}\PY{p}{,} ifelse \PY{p}{(}difs\PY{o}{\PYZgt{}}\PY{l+m}{0}\PY{p}{,} \PY{k+kp}{abs}\PY{p}{(}difs\PY{p}{)}\PY{l+m}{+0.1}\PY{p}{,} \PY{l+m}{0}\PY{l+m}{+0.1}\PY{p}{)}\PY{p}{)}
         \PY{k+kp}{colnames}\PY{p}{(}wilc\PYZus{}1\PYZus{}2\PY{p}{)} \PY{o}{\PYZlt{}\PYZhy{}} \PY{k+kt}{c}\PY{p}{(}\PY{k+kp}{colnames}\PY{p}{(}tablatst\PY{p}{)}\PY{p}{[}\PY{l+m}{1}\PY{p}{]}\PY{p}{,} \PY{k+kp}{colnames}\PY{p}{(}tablatst\PY{p}{)}\PY{p}{[}\PY{l+m}{2}\PY{p}{]}\PY{p}{)}
         wilc\PYZus{}1\PYZus{}2
\end{Verbatim}


    \begin{tabular}{r|ll}
  & knnMSEtest.simple & lmMSEtest.multiple1\\
\hline
	knnMSEtest.simple & 0.4498699 & 0.1      \\
\end{tabular}


    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}45}]:} \PY{c+c1}{\PYZsh{} Realizamos el test de wilcoxon y analizamos los resultados.}
         LMvsKNNtst \PY{o}{\PYZlt{}\PYZhy{}} wilcox.test\PY{p}{(}wilc\PYZus{}1\PYZus{}2\PY{p}{[}\PY{p}{,}\PY{l+m}{1}\PY{p}{]}\PY{p}{,} wilc\PYZus{}1\PYZus{}2\PY{p}{[}\PY{p}{,}\PY{l+m}{2}\PY{p}{]}\PY{p}{,} alternative \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{two.sided\PYZdq{}}\PY{p}{,} paired\PY{o}{=}\PY{k+kc}{TRUE}\PY{p}{)}
         Rmas \PY{o}{\PYZlt{}\PYZhy{}} LMvsKNNtst\PY{o}{\PYZdl{}}statistic
         pvalue \PY{o}{\PYZlt{}\PYZhy{}} LMvsKNNtst\PY{o}{\PYZdl{}}p.value
         LMvsKNNtst \PY{o}{\PYZlt{}\PYZhy{}} wilcox.test\PY{p}{(}wilc\PYZus{}1\PYZus{}2\PY{p}{[}\PY{p}{,}\PY{l+m}{2}\PY{p}{]}\PY{p}{,} wilc\PYZus{}1\PYZus{}2\PY{p}{[}\PY{p}{,}\PY{l+m}{1}\PY{p}{]}\PY{p}{,} alternative \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{two.sided\PYZdq{}}\PY{p}{,} paired\PY{o}{=}\PY{k+kc}{TRUE}\PY{p}{)}
         Rmenos \PY{o}{\PYZlt{}\PYZhy{}} LMvsKNNtst\PY{o}{\PYZdl{}}statistic
         Rmas
         Rmenos
         pvalue
\end{Verbatim}


    \textbf{V:} 1

    
    \textbf{V:} 0

    
    1

    
    En este caso el test de wilcoxon no hay diferencias significativas ya
que el p-valor es muy alto, por ello no podemos decir que haya
diferencias entre el algoritmo de knn y regresión lineal múltiple.


    % Add a bibliography block to the postdoc
    
    
    
    \end{document}
